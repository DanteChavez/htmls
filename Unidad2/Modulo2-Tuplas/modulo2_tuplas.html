<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tuplas en Python</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        base: '#ffffff',
                        alt: '#f1f5f9',
                        title: '#003c58',
                        accent: '#06717e',
                        action: '#0055ad',
                        'action-hover': '#399be2',
                        highlight: '#0f6cbf',
                        'text-on-dark': '#6ea2ee',
                        desc: '#6da8e9',
                        body: '#1e293b',
                        border: '#e2e8f0',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* VS Code Light+ Token Colors */
        .token-keyword {
            color: #0000ff;
        }

        .token-function {
            color: #795e26;
        }

        .token-string {
            color: #a31515;
        }

        .token-number {
            color: #098658;
        }

        .token-comment {
            color: #008000;
        }

        .force-hidden {
            display: none !important;
        }

        /* Mac Window Controls */
        .mac-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 6px;
        }

        .mac-red {
            background-color: #ff5f56;
            border: 1px solid #e0443e;
        }

        .mac-yellow {
            background-color: #ffbd2e;
            border: 1px solid #dea123;
        }

        .mac-green {
            background-color: #27c93f;
            border: 1px solid #1aab29;
        }

        .bg-block {
            background-color: #f8fafc;
        }
    </style>
</head>

<body class="bg-alt h-screen w-screen overflow-hidden">

    <!-- Main App Container -->
    <div class="w-full h-full bg-base shadow-2xl border border-border flex flex-col overflow-hidden relative">

        <!-- Header -->
        <header class="h-16 border-b border-border flex items-center justify-between px-6 bg-base z-50">
            <div class="flex items-center gap-2">
                <span class="ml-4 text-title font-semibold text-lg">Unidad 2: Tuplas</span>
            </div>
            <div class="flex gap-2">
                <span class="text-sm text-body"> <span id="current-slide-num">1</span>/9</span>
            </div>
        </header>

        <!-- Content Area -->
        <main class="flex-1 relative overflow-hidden">

            <!-- Slide 1: Portada -->
            <section id="slide-1"
                class="slide active w-full h-full flex flex-col justify-center items-center text-center p-12">
                <div class="mb-2">
                    <span class="text-2xl font-bold text-accent uppercase tracking-widest">Unidad 2</span>
                </div>
                <h1 class="text-6xl font-bold text-title mb-4 tracking-tight">M√≥dulo 2: Tuplas </h1>
                <p class="text-2xl text-accent font-light mb-12">Estructuras inmutables y ordenadas</p>

                <div class="grid grid-cols-2 gap-8 max-w-2xl w-full mb-12">
                    <div class="bg-alt p-6 rounded-xl border border-border">
                        <h3 class="text-action font-semibold mb-2">Seguridad de Datos</h3>
                        <p class="text-body text-sm">Aprender√°s a proteger tu informaci√≥n contra modificaciones
                            accidentales.</p>
                    </div>
                    <div class="bg-alt p-6 rounded-xl border border-border">
                        <h3 class="text-action font-semibold mb-2">Orden Garantizado</h3>
                        <p class="text-body text-sm">Estructuras secuenciales ideales para coordenadas, configuraciones
                            y registros fijos.</p>
                    </div>
                </div>

                <button onclick="nextSlide()"
                    class="bg-action hover:bg-action-hover text-white px-8 py-3 rounded-lg shadow-lg transition-all transform hover:scale-105 font-medium flex items-center gap-2">
                    Comenzar Experiencia
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                            clip-rule="evenodd" />
                    </svg>
                </button>
                <div class="hidden">Cognitive Check: Learner understands that tuples are chosen intentionally, not
                    accidentally.</div>
            </section>

            <!-- Slide 2: ¬øQu√© es una tupla? -->
            <section id="slide-2" class="slide force-hidden w-full h-full flex items-center justify-center p-8">
                <div class="max-w-5xl w-full grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                    <div class="space-y-6">
                        <h2 class="text-4xl font-bold text-title">¬øQu√© es una Tupla?</h2>
                        <ul class="space-y-4 text-body text-lg">
                            <li class="flex items-start gap-3">
                                <span class="bg-accent text-white rounded-full p-1 mt-1"><svg class="w-4 h-4"
                                        fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 13l4 4L19 7"></path>
                                    </svg></span>
                                <span><strong>Ordenada:</strong> Los elementos tienen una posici√≥n fija (√≠ndice 0, 1,
                                    2...).</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="bg-accent text-white rounded-full p-1 mt-1"><svg class="w-4 h-4"
                                        fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 13l4 4L19 7"></path>
                                    </svg></span>
                                <span><strong>Indexada:</strong> Puedes acceder a valores espec√≠ficos por su
                                    posici√≥n.</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="bg-accent text-white rounded-full p-1 mt-1"><svg class="w-4 h-4"
                                        fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 13l4 4L19 7"></path>
                                    </svg></span>
                                <span><strong>Inmutable:</strong> Una vez creada, <em>no se puede cambiar</em>. Es "solo
                                    lectura".</span>
                            </li>
                        </ul>
                    </div>

                    <div class="flex flex-col gap-8">
                        <!-- Analogy -->
                        <div class="bg-white p-6 rounded-xl border border-border shadow-sm">
                            <h3 class="text-lg font-semibold text-action mb-4 w-full text-center">Analog√≠a: Sobre vs
                                Cuaderno</h3>
                            <div class="flex gap-8 items-center justify-center">
                                <div class="flex flex-col items-center group">
                                    <div
                                        class="w-24 h-32 bg-yellow-100 border-2 border-yellow-300 rounded relative shadow-md flex items-center justify-center transform transition-transform group-hover:-rotate-3">
                                        <!-- Shadow removed -->
                                        <div class="text-4xl">‚úâÔ∏è</div>
                                        <div
                                            class="absolute bottom-2 text-[10px] text-yellow-800 font-bold uppercase tracking-wider">
                                            Sellado</div>
                                    </div>
                                    <span class="text-sm mt-3 font-bold text-accent">Tupla (Sobre)</span>
                                    <p class="text-xs text-center text-gray-500 mt-1 max-w-[120px]">Lo que env√≠as ya no
                                        se puede editar.</p>
                                </div>
                                <div class="text-2xl text-gray-300">vs</div>
                                <div class="flex flex-col items-center group">
                                    <div
                                        class="w-24 h-32 bg-white border-l-4 border-gray-300 shadow-sm relative flex items-center justify-center transform transition-transform group-hover:rotate-3">
                                        <div
                                            class="w-full h-full absolute inset-0 bg-[linear-gradient(transparent_95%,#e5e7eb_95%)] bg-[length:100%_1.5rem]">
                                        </div>
                                        <div class="text-4xl z-10">üìù</div>
                                        <div class="absolute -left-2 top-2 w-4 h-4 rounded-full bg-gray-400"></div>
                                        <div class="absolute -left-2 top-8 w-4 h-4 rounded-full bg-gray-400"></div>
                                        <div class="absolute -left-2 top-14 w-4 h-4 rounded-full bg-gray-400"></div>
                                    </div>
                                    <span class="text-sm mt-3 font-bold text-gray-600">Lista (Cuaderno)</span>
                                    <p class="text-xs text-center text-gray-500 mt-1 max-w-[120px]">Puedes borrar y
                                        reescribir hojas.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 3: Acceso y Lectura -->
            <section id="slide-3"
                class="slide force-hidden w-full h-full flex flex-col items-center justify-center p-8">
                <div class="max-w-5xl w-full grid grid-cols-1 lg:grid-cols-12 gap-8 h-full max-h-[80vh] items-center">
                    <!-- Left: Code & Controls -->
                    <div class="lg:col-span-5 flex flex-col gap-4">
                        <h2 class="text-3xl font-bold text-title">Lectura de Tuplas</h2>
                        <p class="text-body text-sm mb-4">Las tuplas son ideales para datos fijos como coordenadas o
                            configuraciones.</p>

                        <div class="bg-white rounded-lg border border-border overflow-hidden shadow-sm">
                            <div class="bg-gray-100 px-4 py-2 flex items-center gap-2 border-b border-gray-200">
                                <div class="mac-dot mac-red"></div>
                                <div class="mac-dot mac-yellow"></div>
                                <div class="mac-dot mac-green"></div>
                                <span class="text-xs text-gray-500 font-mono ml-2">coordenadas.py</span>
                            </div>
                            <div class="p-4 font-mono text-sm bg-block text-body leading-relaxed"
                                id="s3-code-container">
                                <!-- Dynamic rendering of punto = (10, 20, 30) -->
                            </div>
                        </div>

                        <div class="grid grid-cols-1 gap-3">
                            <button id="btn-index0" onclick="simulateAccess('index0')"
                                class="bg-white text-action border border-action py-2 px-4 rounded hover:bg-alt text-sm font-medium transition-colors text-left flex justify-between items-center group">
                                <span>Ejecutar punto[0]</span>
                                <span class="font-mono opacity-70 group-hover:opacity-100">10</span>
                            </button>
                            <button id="btn-indexNeg" onclick="simulateAccess('indexNeg')"
                                class="bg-white text-action border border-action py-2 px-4 rounded hover:bg-alt text-sm font-medium transition-colors text-left flex justify-between items-center group">
                                <span>Ejecutar punto[-1]</span>
                                <span class="font-mono opacity-70 group-hover:opacity-100">30</span>
                            </button>
                            <button id="btn-loop" onclick="simulateAccess('loop')"
                                class="bg-white text-action border border-action py-2 px-4 rounded hover:bg-alt text-sm font-medium transition-colors text-left flex justify-between items-center group">
                                <span>Ejecutar bucle for</span>
                                <span class="font-mono opacity-70 group-hover:opacity-100">Iterar</span>
                            </button>
                        </div>
                    </div>

                    <!-- Right: Visualizer -->
                    <div
                        class="lg:col-span-7 bg-alt rounded-2xl border border-border p-8 flex flex-col items-center justify-center relative overflow-hidden h-[400px]">
                        <div class="absolute top-4 left-4 text-xs font-bold text-gray-400 uppercase tracking-widest">
                            Memoria</div>

                        <!-- Tuple Container -->
                        <div id="s3-memory-container"
                            class="flex items-center gap-2 bg-white p-4 rounded-xl border-2 border-accent shadow-lg relative z-10 transition-all">
                            <!-- Dynamic items via updateSlide3() -->
                        </div>

                        <!-- Console Output -->
                        <div
                            class="mt-8 w-full max-w-md bg-[#1e1e1e] rounded-lg overflow-hidden shadow-2xl border border-gray-800">
                            <div class="bg-[#333333] px-3 py-2 flex items-center gap-1 border-b border-gray-700">
                                <div class="mac-dot mac-red !w-2.5 !h-2.5"></div>
                                <div class="mac-dot mac-yellow !w-2.5 !h-2.5"></div>
                                <div class="mac-dot mac-green !w-2.5 !h-2.5"></div>
                                <span
                                    class="text-[10px] text-gray-400 font-mono ml-2 uppercase tracking-widest opacity-70">Terminal</span>
                            </div>
                            <div class="p-4 font-mono text-xs text-gray-300 h-32 overflow-y-auto" id="access-console">
                                <span class="opacity-50">Esperando ejecuci√≥n...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 4: Desempaquetado (Unpacking) -->
            <section id="slide-4"
                class="slide force-hidden w-full h-full flex flex-col items-center justify-center p-8">
                <div class="max-w-6xl w-full grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div class="space-y-6">
                        <h2 class="text-4xl font-bold text-title">Desempaquetado (Unpacking)</h2>
                        <p class="text-body text-lg">Python permite asignar los elementos de una tupla a variables
                            individuales en una sola l√≠nea. Es elegante y muy com√∫n.</p>

                        <div class="bg-white rounded-lg border border-border overflow-hidden shadow-sm mt-8">
                            <div class="bg-gray-100 px-4 py-2 flex items-center gap-2 border-b border-gray-200">
                                <div class="mac-dot mac-red"></div>
                                <div class="mac-dot mac-yellow"></div>
                                <div class="mac-dot mac-green"></div>
                                <span class="text-xs text-gray-500 font-mono ml-2">script.py</span>
                            </div>
                            <div class="p-6 font-mono text-base bg-block text-body leading-relaxed">
                                <div class="mb-4"><span class="text-gray-400"># Tupla con datos de un usuario</span>
                                </div>
                                <div class="mb-6">usuario = (<span class="token-string">"Ana"</span>, <span
                                        class="token-number">25</span>, <span class="token-string">"Dev"</span>)</div>
                                <div class="mb-4"><span class="text-gray-400"># Desempaquetado</span></div>
                                <div class="flex items-center gap-2">
                                    <span class="bg-blue-100 px-1 rounded text-blue-800 font-bold"
                                        id="var-nombre">nombre</span>,
                                    <span class="bg-green-100 px-1 rounded text-green-800 font-bold"
                                        id="var-edad">edad</span>,
                                    <span class="bg-purple-100 px-1 rounded text-purple-800 font-bold"
                                        id="var-rol">rol</span>
                                    = usuario
                                </div>
                            </div>
                        </div>

                        <button onclick="animateUnpacking()"
                            class="bg-action text-white px-6 py-3 rounded-lg shadow hover:bg-action-hover transition-colors font-medium">
                            Visualizar Asignaci√≥n
                        </button>
                    </div>

                    <!-- Animation Area -->
                    <div
                        class="h-64 relative bg-alt rounded-2xl border border-border w-full flex items-center justify-center overflow-visible">
                        <!-- Source Tuple -->
                        <div
                            class="absolute top-10 flex gap-2 p-2 bg-white rounded-xl border border-gray-300 shadow-md z-10">
                            <div id="src-0"
                                class="w-20 h-10 bg-gray-50 border border-gray-200 rounded flex items-center justify-center text-sm font-bold text-gray-700">
                                "Ana"</div>
                            <div id="src-1"
                                class="w-20 h-10 bg-gray-50 border border-gray-200 rounded flex items-center justify-center text-sm font-bold text-gray-700">
                                25</div>
                            <div id="src-2"
                                class="w-20 h-10 bg-gray-50 border border-gray-200 rounded flex items-center justify-center text-sm font-bold text-gray-700">
                                "Dev"</div>
                        </div>

                        <!-- Target Variables -->
                        <div class="absolute bottom-10 flex gap-16 w-full justify-center">
                            <div class="flex flex-col items-center gap-2">
                                <div id="target-0"
                                    class="w-20 h-16 border-2 border-dashed border-blue-300 rounded bg-blue-50 flex items-center justify-center text-blue-800 font-bold transition-all">
                                    ?</div>
                                <span class="text-xs font-mono font-bold text-blue-600">nombre</span>
                            </div>
                            <div class="flex flex-col items-center gap-2">
                                <div id="target-1"
                                    class="w-20 h-16 border-2 border-dashed border-green-300 rounded bg-green-50 flex items-center justify-center text-green-800 font-bold transition-all">
                                    ?</div>
                                <span class="text-xs font-mono font-bold text-green-600">edad</span>
                            </div>
                            <div class="flex flex-col items-center gap-2">
                                <div id="target-2"
                                    class="w-20 h-16 border-2 border-dashed border-purple-300 rounded bg-purple-50 flex items-center justify-center text-purple-800 font-bold transition-all">
                                    ?</div>
                                <span class="text-xs font-mono font-bold text-purple-600">rol</span>
                            </div>
                        </div>

                        <!-- Flying Elements (Hidden initially) -->
                        <div id="fly-0"
                            class="absolute top-10 left-[calc(50%-70px)] w-20 h-10 bg-blue-100 border border-blue-400 text-blue-900 rounded flex items-center justify-center text-sm font-bold shadow-xl opacity-0 z-50">
                            "Ana"</div>
                        <div id="fly-1"
                            class="absolute top-10 left-[calc(50%-0px)] w-20 h-10 bg-green-100 border border-green-400 text-green-900 rounded flex items-center justify-center text-sm font-bold shadow-xl opacity-0 z-50">
                            25</div>
                        <div id="fly-2"
                            class="absolute top-10 left-[calc(50%+70px)] w-20 h-10 bg-purple-100 border border-purple-400 text-purple-900 rounded flex items-center justify-center text-sm font-bold shadow-xl opacity-0 z-50">
                            "Dev"</div>
                    </div>
                </div>
            </section>

            <!-- Slide 5: Inmutabilidad -->
            <section id="slide-5"
                class="slide force-hidden w-full h-full flex flex-col items-center justify-center p-8 bg-gradient-to-br from-red-50 to-white">
                <div class="max-w-4xl w-full text-center mb-8">
                    <h2 class="text-4xl font-bold text-title mb-4">Inmutabilidad: Lo que NO puedes hacer</h2>
                    <p class="text-body text-lg">Muchos intentan modificar una tupla como si fuera una lista. <br>Veamos
                        qu√© sucede realmente.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 w-full max-w-5xl">
                    <!-- List Example (Works) -->
                    <div
                        class="bg-white p-6 rounded-xl border border-green-200 shadow-sm opacity-60 hover:opacity-100 transition-opacity">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-bold text-green-700 flex items-center gap-2">
                                <span class="bg-green-100 p-1 rounded">‚úÖ</span> Lista
                            </h3>
                            <span
                                class="text-xs bg-green-50 text-green-600 px-2 py-1 rounded border border-green-100">Mutable</span>
                        </div>
                        <div class="font-mono text-sm bg-gray-50 p-3 rounded border border-gray-200 mb-3">
                            <div class="text-gray-500">lista = [1, 2, 3]</div>
                            <div class="font-bold text-blue-600">lista[0] = 99</div>
                            <div class="text-gray-500">print(lista) # [99, 2, 3]</div>
                        </div>
                        <p class="text-sm text-gray-500">La lista permite cambiar sus elementos internos libremente.</p>
                    </div>

                    <!-- Tuple Example (Fails) -->
                    <div
                        class="bg-white p-6 rounded-xl border border-red-200 shadow-md ring-4 ring-transparent hover:ring-red-50 transition-all">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-bold text-red-700 flex items-center gap-2">
                                <span class="bg-red-100 p-1 rounded">‚ùå</span> Tupla
                            </h3>
                            <span
                                class="text-xs bg-red-50 text-red-600 px-2 py-1 rounded border border-red-100">Inmutable</span>
                        </div>
                        <div class="font-mono text-sm bg-gray-50 p-3 rounded border border-gray-200 mb-3 relative">
                            <div class="text-gray-500">tupla = (1, 2, 3)</div>
                            <div class="font-bold text-red-600 cursor-pointer hover:bg-red-50 p-1 rounded transition-colors"
                                onclick="triggerError()">tupla[0] = 99</div>
                            <div class="text-gray-400 italic"># ¬øQu√© pasar√° aqu√≠?</div>

                            <!-- Interactive Error Click -->
                            <div class="absolute right-2 top-8 animate-bounce cursor-pointer" onclick="triggerError()">
                                <span class="bg-action text-white text-[10px] px-2 py-1 rounded shadow">¬°Haz
                                    Clic!</span>
                            </div>
                        </div>

                        <!-- Error Display -->
                        <div id="error-box"
                            class="hidden mt-4 p-3 bg-[#2d0a0a] rounded border-l-4 border-red-500 font-mono text-xs text-red-200 shadow-inner">
                            <span class="text-red-500 font-bold">TypeError:</span> 'tuple' object does not support item
                            assignment
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 6: Concatenaci√≥n y Pertenencia -->
            <section id="slide-6"
                class="slide force-hidden w-full h-full flex flex-col items-center justify-center p-8">
                <div class="max-w-6xl w-full grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div class="space-y-6">
                        <h2 class="text-4xl font-bold text-title">Operaciones de Uni√≥n y B√∫squeda</h2>
                        <p class="text-body text-lg">Aunque las tuplas son inmutables, podemos <strong>unirlas</strong>
                            para crear una nueva tupla o <strong>verificar</strong> si contienen un valor.</p>

                        <!-- Code Example -->
                        <div class="bg-white rounded-lg border border-border overflow-hidden shadow-sm">
                            <div class="bg-gray-100 px-4 py-2 flex items-center gap-2 border-b border-gray-200">
                                <div class="mac-dot mac-red !w-2.5 !h-2.5"></div>
                                <div class="mac-dot mac-yellow !w-2.5 !h-2.5"></div>
                                <div class="mac-dot mac-green !w-2.5 !h-2.5"></div>
                                <span class="text-xs text-gray-500 font-mono ml-2">operaciones.py</span>
                            </div>
                            <div class="p-6 font-mono text-sm bg-block text-body leading-relaxed space-y-2">
                                <div class="flex items-center gap-2">
                                    <span class="token-variable">t1</span> = (<span id="t1-inputs-container"></span>)
                                    <button onclick="addElement(1)"
                                        class="w-5 h-5 bg-action text-white rounded-full flex items-center justify-center text-xs hover:bg-action-hover focus:outline-none leading-none shadow-sm"
                                        title="A√±adir elemento a t1">+</button>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="token-variable">t2</span> = (<span id="t2-inputs-container"></span>)
                                    <button onclick="addElement(2)"
                                        class="w-5 h-5 bg-action text-white rounded-full flex items-center justify-center text-xs hover:bg-action-hover focus:outline-none leading-none shadow-sm"
                                        title="A√±adir elemento a t2">+</button>
                                </div>
                                <div class="pt-2 text-gray-400 italic"># Concatenaci√≥n (+)</div>
                                <div><span class="token-variable">mixta</span> = t1 + t2</div>
                                <div class="pt-2 text-gray-400 italic"># Pertenencia (in)</div>
                                <div class="flex items-center gap-1">
                                    <span class="token-function">print</span>(<input type="number" id="search-val-input"
                                        value="3"
                                        class="w-10 border rounded text-center bg-yellow-50 font-bold text-action">
                                    <span class="token-keyword">in</span> mixta)
                                </div>
                            </div>
                        </div>

                        <div class="flex gap-4">
                            <button onclick="animateConcat()"
                                class="bg-action text-white px-6 py-3 rounded-lg shadow hover:bg-action-hover transition-colors font-medium">
                                Concatenar Tuplas (+)
                            </button>
                            <button id="btn-check-membership" onclick="checkMembership()"
                                class="bg-white text-action border-2 border-action px-6 py-3 rounded-lg shadow hover:bg-alt transition-all font-bold">
                                Verificar '3' (in)
                            </button>
                        </div>
                    </div>

                    <!-- Visualizer -->
                    <div
                        class="bg-alt rounded-2xl border border-border p-8 flex flex-col items-center justify-center relative min-h-[400px]">
                        <div class="absolute top-4 left-4 text-xs font-bold text-gray-400 uppercase tracking-widest">
                            Visualizador</div>

                        <div id="concat-stage" class="flex flex-col gap-12 items-center w-full">
                            <!-- Input Tuples -->
                            <div class="flex gap-8 items-center" id="input-tuples">
                                <div id="v-t1-container"
                                    class="flex items-center gap-2 bg-white p-4 rounded-xl border-2 border-accent shadow-sm relative min-w-[100px] min-h-[72px]">
                                    <!-- Dynamic -->
                                </div>
                                <span class="text-2xl font-bold text-gray-300">+</span>
                                <div id="v-t2-container"
                                    class="flex items-center gap-2 bg-white p-4 rounded-xl border-2 border-accent shadow-sm relative min-w-[100px] min-h-[72px]">
                                    <!-- Dynamic -->
                                </div>
                            </div>

                            <!-- Result Tuple (Hidden initially) -->
                            <div id="result-tuple"
                                class="flex items-center gap-1 bg-white p-4 rounded-xl border-4 border-action shadow-2xl relative scale-0 transition-all duration-500 overflow-x-auto max-w-full">
                                <span
                                    class="absolute -top-4 left-4 bg-action text-white px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider">Nueva
                                    Tupla</span>
                                <div id="result-elements" class="flex items-center gap-1">
                                    <!-- Dynamic items m-0, m-1 ... -->
                                </div>
                            </div>
                        </div>

                        <!-- Result Message -->
                        <div id="op-message"
                            class="absolute bottom-6 bg-white px-4 py-2 rounded-full border border-border shadow-sm text-sm font-medium text-body opacity-0 transition-opacity">
                            Listo
                        </div>

                        <!-- Error Alert -->
                        <div id="concat-error"
                            class="absolute inset-x-0 bottom-24 flex justify-center pointer-events-none opacity-0 transition-all duration-300 scale-90">
                            <div
                                class="bg-red-50 border border-red-200 text-red-600 px-6 py-3 rounded-xl shadow-lg flex items-center gap-3 animate-bounce">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <span class="font-bold text-sm">Error: Primero debes concatenar las tuplas</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 7: Slicing (Rebanado) -->
            <section id="slide-7"
                class="slide force-hidden w-full h-full flex flex-col items-center justify-center p-8">
                <div class="max-w-6xl w-full grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div class="space-y-6">
                        <h2 class="text-4xl font-bold text-title">Slicing (Rebanado)</h2>
                        <p class="text-body text-lg">Al igual que las listas, podemos extraer una
                            <strong>sub-porci√≥n</strong> de la tupla usando la sintaxis <code>[inicio:fin]</code>.
                        </p>

                        <!-- Code Example -->
                        <div class="bg-white rounded-lg border border-border overflow-hidden shadow-sm">
                            <div class="bg-gray-100 px-4 py-2 flex items-center gap-2 border-b border-gray-200">
                                <div class="mac-dot mac-red"></div>
                                <div class="mac-dot mac-yellow"></div>
                                <div class="mac-dot mac-green"></div>
                                <span class="text-xs text-gray-500 font-mono ml-2">slicing.py</span>
                            </div>
                            <div class="p-6 font-mono text-base bg-block text-body leading-relaxed">
                                <div><span class="token-variable">letras</span> = (<span
                                        class="token-string">"A"</span>, <span class="token-string">"B"</span>, <span
                                        class="token-string">"C"</span>, <span class="token-string">"D"</span>, <span
                                        class="token-string">"E"</span>)</div>
                                <div class="mt-4 flex items-center gap-2 whitespace-nowrap overflow-x-auto pb-2">
                                    <span class="token-variable">sub</span> = letras[<input type="number"
                                        id="slice-start" value="1" min="-5" max="5"
                                        class="w-12 border rounded px-1 text-center bg-blue-50"
                                        oninput="updateSlicing()"> :
                                    <input type="number" id="slice-end" value="4" min="-5" max="5"
                                        class="w-12 border rounded px-1 text-center bg-blue-50"
                                        oninput="updateSlicing()">]
                                </div>
                                <div class="mt-2 text-action font-bold" id="slice-result-code"># Resultado: ("B", "C",
                                    "D")</div>
                            </div>
                        </div>

                        <div class="p-4 bg-blue-50 rounded-lg border border-blue-100 text-sm text-blue-800">
                            <strong>Tip:</strong> El √≠ndice de <code>fin</code> no se incluye en el resultado.
                            Es decir: <em>"desde el inicio hasta antes del fin"</em>.
                        </div>
                    </div>

                    <!-- Visualizer -->
                    <div
                        class="bg-white rounded-2xl border border-border p-12 flex flex-col items-center justify-center relative min-h-[400px] shadow-sm">
                        <div class="absolute top-4 left-4 text-xs font-bold text-gray-400 uppercase tracking-widest">
                            Vista de Memoria</div>

                        <!-- Tuple with indices -->
                        <div class="flex items-center gap-2 relative mt-8 h-32">
                            <div id="slice-item-0"
                                class="w-16 h-16 bg-gray-50 border-2 border-gray-200 rounded-lg flex items-center justify-center font-mono text-xl font-bold transition-all duration-300">
                                A</div>
                            <div id="slice-item-1"
                                class="w-16 h-16 bg-gray-50 border-2 border-gray-200 rounded-lg flex items-center justify-center font-mono text-xl font-bold transition-all duration-300">
                                B</div>
                            <div id="slice-item-2"
                                class="w-16 h-16 bg-gray-50 border-2 border-gray-200 rounded-lg flex items-center justify-center font-mono text-xl font-bold transition-all duration-300">
                                C</div>
                            <div id="slice-item-3"
                                class="w-16 h-16 bg-gray-50 border-2 border-gray-200 rounded-lg flex items-center justify-center font-mono text-xl font-bold transition-all duration-300">
                                D</div>
                            <div id="slice-item-4"
                                class="w-16 h-16 bg-gray-50 border-2 border-gray-200 rounded-lg flex items-center justify-center font-mono text-xl font-bold transition-all duration-300">
                                E</div>

                            <!-- Indices Labels -->
                            <div class="absolute -top-6 left-0 w-full flex justify-between px-1">
                                <span class="text-[10px] font-mono font-bold text-gray-400">0</span>
                                <span class="text-[10px] font-mono font-bold text-gray-400">1</span>
                                <span class="text-[10px] font-mono font-bold text-gray-400">2</span>
                                <span class="text-[10px] font-mono font-bold text-gray-400">3</span>
                                <span class="text-[10px] font-mono font-bold text-gray-400">4</span>
                            </div>

                            <!-- Slice Highlights (Drawn by JS) -->
                            <div id="slice-overlay"
                                class="absolute h-20 border-4 border-action rounded-xl pointer-events-none transition-all duration-300 flex items-start justify-center">
                                <span
                                    class="bg-action text-white text-[10px] px-2 py-0.5 rounded -top-8 absolute font-bold uppercase whitespace-nowrap">Rebanada
                                    Selecci√≥n</span>
                            </div>
                        </div>

                        <!-- Result Display -->
                        <div class="mt-20 flex flex-col items-center">
                            <span class="text-xs font-bold text-gray-400 uppercase mb-2 tracking-tighter">Nueva Tupla
                                Resultante</span>
                            <div id="slice-output"
                                class="flex gap-2 p-3 bg-alt border border-border rounded-xl min-h-[50px] items-center justify-center font-mono font-bold text-action">
                                <!-- Generated by JS -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 8: M√©todos .count() y .index() -->
            <section id="slide-8"
                class="slide force-hidden w-full h-full flex flex-col items-center justify-center p-8">
                <div class="max-w-6xl w-full grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div class="space-y-6">
                        <h2 class="text-4xl font-bold text-title">M√©todos √ötiles: B√∫squeda y Conteo</h2>
                        <p class="text-body text-lg">Debido a su inmutabilidad, las tuplas tienen pocos m√©todos. Los m√°s
                            importantes son para <strong>localizar</strong> y <strong>contar</strong> elementos.</p>

                        <div class="bg-white rounded-lg border border-border overflow-hidden shadow-sm mt-4">
                            <div class="bg-gray-100 px-4 py-2 flex items-center gap-2 border-b border-gray-200">
                                <div class="mac-dot mac-red"></div>
                                <div class="mac-dot mac-yellow"></div>
                                <div class="mac-dot mac-green"></div>
                                <span class="text-xs text-gray-500 font-mono ml-2">metodos_tupla.py</span>
                            </div>
                            <div class="p-6 font-mono text-base bg-block text-body leading-relaxed">
                                <div><span class="token-variable">temas</span> = (<span
                                        id="temas-inputs-container"></span>)</div>
                                <div class="mt-4 space-y-2">
                                    <div class="flex items-center gap-2">
                                        <button onclick="simulateMethods('count')"
                                            class="bg-blue-100 hover:bg-blue-200 text-blue-800 px-2 py-0.5 rounded text-sm font-bold transition-colors">temas.count(<input
                                                type="text" id="count-target" value="f√≠sica"
                                                class="bg-transparent border-b border-blue-400 w-16 text-center focus:outline-none">
                                            )</button>
                                        <span class="text-gray-400 text-sm italic"># ¬øCu√°ntas veces aparece?</span>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <button onclick="simulateMethods('index')"
                                            class="bg-green-100 hover:bg-green-200 text-green-800 px-2 py-0.5 rounded text-sm font-bold transition-colors">temas.index(<input
                                                type="text" id="index-target" value="qu√≠mica"
                                                class="bg-transparent border-b border-green-400 w-16 text-center focus:outline-none">)</button>
                                        <span class="text-gray-400 text-sm italic"># ¬øEn qu√© posici√≥n est√°?</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div
                            class="p-4 bg-yellow-50 rounded-lg border border-yellow-100 text-xs text-yellow-800 flex gap-3">
                            <svg class="w-8 h-8 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <div>
                                <strong>Nota Extra:</strong> Si usas <code>.index()</code> con un valor que no existe,
                                Python lanzar√° un <code>ValueError</code>. Siempre es bueno verificar con
                                <code>in</code> primero.
                            </div>
                        </div>
                    </div>

                    <!-- Methods Visualizer -->
                    <div
                        class="bg-alt rounded-2xl border border-border p-8 flex flex-col items-center justify-center relative min-h-[400px]">
                        <div class="absolute top-4 left-4 text-xs font-bold text-gray-400 uppercase tracking-widest">
                            Memoria de "temas"</div>

                        <div id="methods-memory" class="flex flex-wrap justify-center gap-4 max-w-md">
                            <!-- tema-0, tema-1, etc. -->
                        </div>

                        <!-- Result Display Area -->
                        <div id="methods-result"
                            class="mt-12 h-16 flex items-center justify-center text-2xl font-bold text-action opacity-0 transition-all scale-90">
                            <!-- Result Text -->
                        </div>
                    </div>
                </div>
            </section>
            <!-- Slide 9: Fin del M√≥dulo -->
            <section id="slide-9"
                class="slide force-hidden w-full h-full flex flex-col items-center justify-center p-12 text-center">
                <h2 class="text-4xl font-bold text-title mb-8">M√≥dulo 2: Tuplas Finalizado</h2>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 w-full max-w-5xl">
                    <!-- Column 1: Conceptos -->
                    <div class="bg-white p-6 rounded-xl border border-border shadow-sm flex flex-col items-center">
                        <div class="w-12 h-12 bg-accent/10 rounded-full flex items-center justify-center mb-4">
                            <svg class="w-6 h-6 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01">
                                </path>
                            </svg>
                        </div>
                        <h3 class="font-bold text-title mb-2">Conceptos Clave</h3>
                        <ul class="text-sm text-body space-y-2 text-left w-full px-4">
                            <li class="flex items-center gap-2"><span
                                    class="w-2 h-2 rounded-full bg-accent"></span>Colecci√≥n
                                <strong>Ordenada</strong>
                            </li>
                            <li class="flex items-center gap-2"><span
                                    class="w-2 h-2 rounded-full bg-accent"></span>Elementos
                                <strong>Inmutables</strong>
                            </li>
                            <li class="flex items-center gap-2"><span
                                    class="w-2 h-2 rounded-full bg-accent"></span>Acceso por
                                <strong>√çndice</strong>
                            </li>
                        </ul>
                    </div>

                    <!-- Column 2: Logros -->
                    <div
                        class="bg-white p-6 rounded-xl border border-border shadow-sm flex flex-col items-center relative overflow-hidden">
                        <div class="absolute top-0 w-full h-1 bg-gradient-to-r from-action to-action-hover"></div>
                        <div class="w-12 h-12 bg-action/10 rounded-full flex items-center justify-center mb-4">
                            <svg class="w-6 h-6 text-action" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                        </div>
                        <h3 class="font-bold text-title mb-2">Ahora puedes...</h3>
                        <ul class="text-sm text-body space-y-2 text-left w-full px-4">
                            <li class="flex items-center gap-2">‚úÖ Agrupar datos heterog√©neos fijos</li>
                            <li class="flex items-center gap-2">‚úÖ Garantizar integridad de los datos</li>
                            <li class="flex items-center gap-2">‚úÖ Usar desempaquetado elegante</li>
                        </ul>
                    </div>

                    <!-- Column 3: Cu√°ndo Usar -->
                    <div
                        class="bg-gray-50 p-6 rounded-xl border border-border dashed border-2 flex flex-col items-center">
                        <div class="w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center mb-4">
                            <svg class="w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <h3 class="font-bold text-gray-700 mb-2">¬øCu√°ndo NO usarlo?</h3>
                        <p class="text-xs text-body mb-2 text-center">Si necesitas <strong>modificar</strong>
                            (a√±adir/quitar) datos frecuentemente.</p>
                        <p class="text-xs text-body text-center">Si la colecci√≥n crece <strong>din√°micamente</strong>.
                        </p>
                    </div>
                </div>

                <div class="mt-12">
                    <p class="text-gray-400 text-sm mb-4">Has completado el M√≥dulo 2 de la Unidad 2</p>
                    <button onclick="restartModule()"
                        class="bg-alt text-action hover:bg-gray-200 border border-border px-6 py-2 rounded-full text-sm font-medium transition-colors">
                        Reiniciar M√≥dulo
                    </button>
                </div>
            </section>

        </main>

        <footer class="h-14 bg-white border-t border-border flex items-center justify-between px-8 z-50">
            <button id="prev-btn" onclick="prevSlide()"
                class="flex items-center gap-2 text-slate-400 hover:text-title transition-colors font-bold text-xs uppercase tracking-widest disabled:opacity-0"
                disabled>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
                Anterior
            </button>

            <button id="next-btn" onclick="nextSlide()"
                class="flex items-center gap-2 text-action hover:text-highlight transition-colors font-bold text-xs uppercase tracking-widest disabled:opacity-0">
                Siguiente
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
            </button>
        </footer>
    </div>

    <script>
        // Navigation Logic
        let currentSlide = 1;
        const totalSlides = 9;
        let puntoItems = [10, 20, 30]; // Static for Slide 3
        let t1Items = [1, 2];
        let t2Items = [3, 4];
        let temasItems = ["f√≠sica", "qu√≠mica", "f√≠sica", "f√≠sica"];
        let t1Count = 2; // Keep for compatibility or remove later
        let t2Count = 2;
        let mixtaCreated = false;
        const slideCounter = document.getElementById('current-slide-num');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');

        // Initial setup
        document.querySelectorAll('.slide').forEach((slide, index) => {
            if (index === 0) {
                slide.classList.remove('force-hidden');
                slide.classList.add('active');
            } else {
                slide.classList.add('force-hidden');
                slide.classList.remove('active');
            }
        });

        function updateSlide() {
            document.querySelectorAll('.slide').forEach((slide, index) => {
                if (index === currentSlide - 1) {
                    slide.classList.remove('force-hidden');
                    slide.classList.add('active', 'fade-in');
                } else {
                    slide.classList.add('force-hidden');
                    slide.classList.remove('active', 'fade-in');
                }
            });
            slideCounter.textContent = currentSlide;

            // Update Buttons
            prevBtn.disabled = currentSlide === 1;
            nextBtn.disabled = currentSlide === totalSlides;

            // Optional: visual update for disabled state if not handled by CSS entirely
            prevBtn.classList.toggle('opacity-0', currentSlide === 1);
            prevBtn.classList.toggle('cursor-not-allowed', currentSlide === 1);

            nextBtn.classList.toggle('opacity-0', currentSlide === totalSlides);
            nextBtn.classList.toggle('cursor-not-allowed', currentSlide === totalSlides);

            // Trigger Slide-Specific Inits
            if (currentSlide === 3) updateSlide3();
            if (currentSlide === 6) resetSlide5();
            if (currentSlide === 7) updateSlicing();
            if (currentSlide === 8) initSlide8();
        }

        function nextSlide() {
            if (currentSlide < totalSlides) {
                currentSlide++;
                updateSlide();
            }
        }

        function prevSlide() {
            if (currentSlide > 1) {
                currentSlide--;
                updateSlide();
            }
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === "ArrowRight") nextSlide();
            if (e.key === "ArrowLeft") prevSlide();
        });

        // Slide 3 Interactions
        function updateSlide3() {
            const codeContainer = document.getElementById('s3-code-container');
            const memoryContainer = document.getElementById('s3-memory-container');
            if (!codeContainer || !memoryContainer) return;

            // Update Code Snippet (No buttons, no interactive spans)
            codeContainer.innerHTML = `
                <div class="mb-2 text-[10px] text-action font-bold uppercase tracking-wider opacity-60">Estructura de la Tupla:</div>
                <div class="flex items-center gap-2 mb-4">
                    <span class="token-variable">punto</span> = (<span id="punto-items-code">${puntoItems.map((v, i) => `
                        <span class="px-1">
                            <span class="token-number font-bold">${v}</span>${i < puntoItems.length - 1 ? ',' : ''}
                        </span>`).join('')}</span>)
                </div>
                <div class="mt-2 text-gray-400 italic"># Acceso por √≠ndice</div>
                <div><span class="token-function">print</span>(punto[<span class="token-number">0</span>])</div>
                <div><span class="token-function">print</span>(punto[-<span class="token-number">1</span>])</div>
                <div class="mt-2 text-gray-400 italic"># Iteraci√≥n</div>
                <div><span class="token-keyword">for</span> coord <span class="token-keyword">in</span> punto:</div>
                <div class="pl-4"><span class="token-function">print</span>(coord)</div>
            `;

            // Update Memory Visualizer (No "x" buttons)
            memoryContainer.innerHTML = `
                <span class="absolute -top-3 left-4 bg-white px-2 text-xs font-bold text-accent">Memoria RAM</span>
                <div class="flex items-center gap-4">
                ${puntoItems.map((v, i) => `
                    <div id="item-${i}" class="w-16 h-16 bg-white border-2 border-accent/20 rounded-xl flex flex-col items-center justify-center relative transition-all duration-300 shadow-sm">
                        <span class="text-xl font-mono font-bold text-body">${v}</span>
                        <span class="absolute bottom-1 right-2 text-[10px] text-gray-400 font-mono">${i}</span>
                        ${i === puntoItems.length - 1 ? `<span class="absolute top-1 left-2 text-[10px] text-gray-400 font-mono">-1</span>` : ''}
                    </div>
                `).join('')}
                </div>
            `;
        }

        function addSlide3Item() {
            if (puntoItems.length >= 5) return;
            const lastVal = puntoItems[puntoItems.length - 1] || 0;
            puntoItems.push(lastVal + 10);
            updateSlide3();
        }

        function removeSlide3Item(index) {
            if (puntoItems.length <= 1) return;
            puntoItems.splice(index, 1);
            updateSlide3();
            // Clear console to avoid confusion with old indices
            const consoleBox = document.getElementById('access-console');
            if (consoleBox) consoleBox.innerHTML = '<span class="opacity-50">Elemento borrado. Esperando ejecuci√≥n...</span>';
        }

        function simulateAccess(type) {
            const consoleBox = document.getElementById('access-console');
            const items = puntoItems.map((_, i) => document.getElementById(`item-${i}`));
            const buttons = [document.getElementById('btn-index0'), document.getElementById('btn-indexNeg'), document.getElementById('btn-loop')];

            buttons.forEach(btn => {
                btn.classList.remove('bg-action', 'text-white', 'hover:bg-action-hover');
                btn.classList.add('bg-white', 'text-action', 'border-action', 'hover:bg-alt');
            });

            const activeBtn = document.getElementById(`btn-${type}`);
            if (activeBtn) {
                activeBtn.classList.remove('bg-white', 'text-action', 'hover:bg-alt');
                activeBtn.classList.add('bg-action', 'text-white', 'hover:bg-action-hover');
            }

            items.forEach(i => {
                if (i) {
                    i.classList.remove('ring-4', 'ring-action', 'scale-110', 'bg-blue-100');
                    i.classList.add('bg-gray-50', 'border-gray-200');
                }
            });

            if (type === 'index0') {
                consoleBox.innerHTML += `<div class="mb-1"><span class="text-green-400">>>>></span> print(punto[0])</div>`;
                setTimeout(() => {
                    consoleBox.innerHTML += `<div class="mb-2 text-white font-bold ml-4">${puntoItems[0]}</div>`;
                    if (items[0]) {
                        items[0].classList.remove('bg-gray-50', 'border-gray-200');
                        items[0].classList.add('ring-4', 'ring-action', 'scale-110', 'bg-blue-100');
                    }
                    consoleBox.scrollTop = consoleBox.scrollHeight;
                }, 300);
            } else if (type === 'indexNeg') {
                consoleBox.innerHTML += `<div class="mb-1"><span class="text-green-400">>>>></span> print(punto[-1])</div>`;
                setTimeout(() => {
                    const lastIdx = puntoItems.length - 1;
                    consoleBox.innerHTML += `<div class="mb-2 text-white font-bold ml-4">${puntoItems[lastIdx]}</div>`;
                    if (items[lastIdx]) {
                        items[lastIdx].classList.remove('bg-gray-50', 'border-gray-200');
                        items[lastIdx].classList.add('ring-4', 'ring-action', 'scale-110', 'bg-blue-100');
                    }
                    consoleBox.scrollTop = consoleBox.scrollHeight;
                }, 300);
            } else if (type === 'loop') {
                consoleBox.innerHTML += `<div class="mb-1"><span class="text-green-400">>>>></span> for x in punto:...</div>`;
                let delay = 300;
                items.forEach((item, idx) => {
                    setTimeout(() => {
                        consoleBox.innerHTML += `<div class="text-white ml-4">${puntoItems[idx]}</div>`;
                        items.forEach(i => {
                            if (i) {
                                i.classList.remove('ring-4', 'ring-action', 'bg-blue-100', 'scale-110');
                                i.classList.add('bg-gray-50', 'border-gray-200');
                            }
                        });
                        item.classList.remove('bg-gray-50', 'border-gray-200');
                        item.classList.add('ring-4', 'ring-action', 'bg-blue-100');
                        consoleBox.scrollTop = consoleBox.scrollHeight;
                    }, delay);
                    delay += 600;
                });
                setTimeout(() => {
                    items.forEach(i => {
                        if (i) i.classList.remove('ring-4', 'ring-action', 'bg-blue-100');
                    });
                }, delay + 600);
            }
        }

        // Slide 5 Interactions
        function updateSlide5Controls(tupleNum) {
            const items = tupleNum === 1 ? t1Items : t2Items;
            const containerInputs = document.getElementById(`t${tupleNum}-inputs-container`);
            const containerVisual = document.getElementById(`v-t${tupleNum}-container`);
            if (!containerInputs || !containerVisual) return;

            // Update Inputs in Code
            containerInputs.innerHTML = items.map((v, i) => `
                <input type="number" id="t${tupleNum}-val-${i}" value="${v}" 
                    oninput="t${tupleNum === 1 ? '1' : '2'}Items[${i}] = this.value; updateValueVisuals()"
                    class="w-8 border rounded text-center bg-${tupleNum === 1 ? 'blue' : 'green'}-50">
            `).join(', ');

            // Update Visualizer with 'x' buttons
            const color = tupleNum === 1 ? 'blue' : 'green';
            containerVisual.innerHTML = `
                <span class="absolute -top-3 left-2 bg-white px-1 text-[10px] font-bold text-accent">t${tupleNum}</span>
                ${items.map((v, i) => `
                    <div class="w-10 h-10 bg-${color}-50 border border-${color}-200 rounded-lg flex items-center justify-center font-mono font-bold relative group shadow-sm transition-all hover:border-red-300" id="v-t${tupleNum}-${i}">
                        <span class="v-val">${v}</span>
                        ${items.length > 1 ? `
                        <button onclick="removeSlide5Item(${tupleNum}, ${i})" 
                            class="absolute -top-1.5 -right-1.5 w-4 h-4 bg-red-500 text-white rounded-full flex items-center justify-center text-[10px] shadow-md z-10 hover:bg-red-700 transition-colors border border-white font-bold"
                            title="Borrar elemento">√ó</button>` : ''}
                    </div>
                `).join('')}
            `;

            // Sync counts
            if (tupleNum === 1) t1Count = items.length; else t2Count = items.length;
            updateValueVisuals();
        }

        function addElement(tupleNum) {
            const items = tupleNum === 1 ? t1Items : t2Items;
            if (items.length >= 4) return;
            const lastVal = parseInt(items[items.length - 1]) || 0;
            items.push(lastVal + 1);
            updateSlide5Controls(tupleNum);
        }

        function removeSlide5Item(tupleNum, index) {
            const items = tupleNum === 1 ? t1Items : t2Items;
            if (items.length <= 1) return;
            items.splice(index, 1);
            updateSlide5Controls(tupleNum);
        }

        function resetSlide5() {
            mixtaCreated = false;
            t1Items = [1, 2];
            t2Items = [3, 4];
            t1Count = 2;
            t2Count = 2;

            const resTuple = document.getElementById('result-tuple');
            const inTuples = document.getElementById('input-tuples');
            const opMsg = document.getElementById('op-message');
            const errBox = document.getElementById('concat-error');
            const resElements = document.getElementById('result-elements');

            if (resTuple) {
                resTuple.classList.remove('scale-100');
                resTuple.classList.add('scale-0');
            }
            if (resElements) resElements.innerHTML = '';

            if (inTuples) {
                inTuples.style.transition = 'none';
                inTuples.style.transform = 'translateY(0)';
                inTuples.style.opacity = '1';
                void inTuples.offsetWidth;
            }
            if (opMsg) opMsg.classList.add('opacity-0');
            if (errBox) errBox.classList.add('opacity-0');

            updateSlide5Controls(1);
            updateSlide5Controls(2);
        }

        function updateValueVisuals() {
            for (let i = 0; i < t1Count; i++) {
                const val = document.getElementById(`t1-val-${i}`)?.value || '';
                const vis = document.getElementById(`v-t1-${i}`);
                if (vis) {
                    const valSpan = vis.querySelector('.v-val');
                    if (valSpan) valSpan.innerText = val; else vis.innerText = val;
                }
            }
            for (let i = 0; i < t2Count; i++) {
                const val = document.getElementById(`t2-val-${i}`)?.value || '';
                const vis = document.getElementById(`v-t2-${i}`);
                if (vis) {
                    const valSpan = vis.querySelector('.v-val');
                    if (valSpan) valSpan.innerText = val; else vis.innerText = val;
                }
            }

            // Slide 5 Button Update
            const btn = document.getElementById('btn-check-membership');
            const searchVal = document.getElementById('search-val-input')?.value || '?';
            if (btn) btn.innerText = `Verificar si '${searchVal}' est√° en mixta`;
        }

        function animateConcat() {
            const inputTuples = document.getElementById('input-tuples');
            const resultTuple = document.getElementById('result-tuple');
            const opMessage = document.getElementById('op-message');
            const errBox = document.getElementById('concat-error');
            const resElements = document.getElementById('result-elements');
            if (!inputTuples || !resultTuple || !opMessage || !resElements) return;

            errBox?.classList.add('opacity-0');
            resElements.innerHTML = '';

            let idx = 0;
            for (let i = 0; i < t1Count; i++) {
                const val = document.getElementById(`t1-val-${i}`).value;
                resElements.insertAdjacentHTML('beforeend', `<div class="w-12 h-12 bg-blue-50 border-2 border-blue-200 rounded flex items-center justify-center font-mono text-xl font-bold" id="m-${idx++}">${val}</div>`);
            }
            for (let i = 0; i < t2Count; i++) {
                const val = document.getElementById(`t2-val-${i}`).value;
                resElements.insertAdjacentHTML('beforeend', `<div class="w-12 h-12 bg-green-50 border-2 border-green-200 rounded flex items-center justify-center font-mono text-xl font-bold" id="m-${idx++}">${val}</div>`);
            }

            inputTuples.style.transition = 'all 0.5s ease-in-out';
            inputTuples.style.transform = 'translateY(-20px)';
            inputTuples.style.opacity = '0.5';

            setTimeout(() => {
                resultTuple.classList.remove('scale-0');
                resultTuple.classList.add('scale-100');
                opMessage.innerText = 't1 + t2 -> Nueva Tupla creada';
                opMessage.classList.add('opacity-100');
                opMessage.classList.remove('opacity-0');
                mixtaCreated = true;
            }, 300);
        }

        function checkMembership() {
            const opMessage = document.getElementById('op-message');
            const errBox = document.getElementById('concat-error');
            const target = document.getElementById('search-val-input')?.value;

            if (!mixtaCreated) {
                if (errBox) {
                    errBox.classList.remove('opacity-0', 'scale-90');
                    errBox.classList.add('opacity-100', 'scale-100');
                    setTimeout(() => {
                        errBox.classList.add('opacity-0', 'scale-90');
                        errBox.classList.remove('opacity-100', 'scale-100');
                    }, 3000);
                }
                return;
            }

            const totalItems = t1Count + t2Count;
            let foundIdx = -1;
            for (let i = 0; i < totalItems; i++) {
                const el = document.getElementById(`m-${i}`);
                if (el) {
                    el.classList.remove('ring-4', 'ring-green-400', 'bg-green-100', 'scale-110');
                    if (el.innerText === target && foundIdx === -1) {
                        foundIdx = i;
                    }
                }
            }

            if (foundIdx !== -1) {
                const el = document.getElementById(`m-${foundIdx}`);
                el.classList.add('ring-4', 'ring-green-400', 'bg-green-100', 'scale-110');
                opMessage.innerText = `${target} in mixta -> True (¬°Encontrado!)`;
                setTimeout(() => el.classList.remove('scale-110'), 500);
            } else {
                opMessage.innerText = `${target} in mixta -> False (No existe)`;
            }

            opMessage.classList.remove('opacity-0');
            opMessage.classList.add('opacity-100');
        }

        // Slide 6 Interactions
        function updateSlicing() {
            const startInput = document.getElementById('slice-start');
            const endInput = document.getElementById('slice-end');
            if (!startInput || !endInput) return;

            const items = ["A", "B", "C", "D", "E"];
            const len = items.length;

            let startVal = parseInt(startInput.value);
            let endVal = parseInt(endInput.value);
            if (isNaN(startVal)) startVal = 0;
            if (isNaN(endVal)) endVal = 0;

            const resolvePos = (idx) => {
                if (idx < 0) return Math.max(0, len + idx);
                return Math.min(len, idx);
            };

            const startPos = resolvePos(startVal);
            const endPos = resolvePos(endVal);

            // Logic for Python-style slicing results
            const sliceResult = items.slice(startPos, endPos);

            const overlay = document.getElementById('slice-overlay');
            const resultDisplay = document.getElementById('slice-output');
            const resultCode = document.getElementById('slice-result-code');

            if (!overlay || !resultDisplay || !resultCode) return;

            // Visual highlight (clamped for visualizer grid)
            // The visual overlay should always go from the smaller index to the larger one for display
            const visStart = Math.min(startPos, endPos);
            const visEnd = Math.max(startPos, endPos);

            const itemWidth = 72;
            overlay.style.transition = 'all 0.3s ease';
            overlay.style.left = `${startPos * itemWidth}px`;
            overlay.style.width = `${Math.max(0, (endPos - startPos) * itemWidth - 8)}px`;
            overlay.style.opacity = (endPos > startPos) ? '1' : '0.2'; // Only show if slice is valid

            for (let i = 0; i < len; i++) {
                const el = document.getElementById(`slice-item-${i}`);
                if (el) {
                    if (i >= startPos && i < endPos) {
                        el.classList.add('border-action', 'bg-blue-50', 'text-action', 'scale-105');
                    } else {
                        el.classList.remove('border-action', 'bg-blue-50', 'text-action', 'scale-105');
                    }
                }
            }

            resultDisplay.innerHTML = sliceResult.length > 0
                ? sliceResult.map(l => `<div class="w-10 h-10 bg-white border border-action rounded flex items-center justify-center">${l}</div>`).join('')
                : '<span class="text-gray-400 text-xs italic">Tupla vac√≠a ()</span>';

            resultCode.innerText = `# Resultado: (${sliceResult.length > 0 ? sliceResult.map(l => `"${l}"`).join(', ') : ''})`;
        }

        // Initialize listeners
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof updateSlide3 === 'function') updateSlide3();
            if (typeof updateSlide5Controls === 'function') {
                updateSlide5Controls(1);
                updateSlide5Controls(2);
            }
            document.getElementById('slice-start')?.addEventListener('input', updateSlicing);
            document.getElementById('slice-end')?.addEventListener('input', updateSlicing);

            // Slide 5 Sync Init
            document.getElementById('search-val-input')?.addEventListener('input', updateValueVisuals);
            if (typeof updateValueVisuals === 'function') updateValueVisuals();
        });
        setTimeout(() => {
            document.getElementById('slice-start')?.addEventListener('input', updateSlicing);
            document.getElementById('slice-end')?.addEventListener('input', updateSlicing);
            document.getElementById('search-val-input')?.addEventListener('input', updateValueVisuals);
        }, 100);

        // Slide 4 Interaction
        function triggerError() {
            const errBox = document.getElementById('error-box');
            errBox.classList.remove('hidden');
            errBox.classList.add('animate-pulse');
            setTimeout(() => errBox.classList.remove('animate-pulse'), 500);
        }

        // Slide 5 Animation
        function animateUnpacking() {
            const fly0 = document.getElementById('fly-0');
            const fly1 = document.getElementById('fly-1');
            const fly2 = document.getElementById('fly-2');

            const target0 = document.getElementById('target-0');
            const target1 = document.getElementById('target-1');
            const target2 = document.getElementById('target-2');

            // Reset
            [fly0, fly1, fly2].forEach(el => {
                el.style.transition = 'none';
                el.style.opacity = '1';
                el.style.transform = 'translate(0, 0)';
            });
            [target0, target1, target2].forEach(el => {
                el.innerText = '?';
                el.classList.add('border-dashed');
                el.classList.remove('border-solid', 'bg-white');
            });

            // Trigger reflow
            void fly0.offsetWidth;

            // Animate
            const targets = [
                { fly: fly0, dest: target0, val: '"Ana"' },
                { fly: fly1, dest: target1, val: '25' },
                { fly: fly2, dest: target2, val: '"Dev"' }
            ];

            targets.forEach((t, i) => {
                t.fly.style.transition = `all 1s ease-in-out ${i * 0.2}s`;

                // Calculate distances
                const startRect = t.fly.getBoundingClientRect();
                const endRect = t.dest.getBoundingClientRect();
                const deltaX = endRect.left - startRect.left + (endRect.width / 2 - startRect.width / 2); // centering fix roughly
                const deltaY = endRect.top - startRect.top;

                // Adjust for accurate landing (simple offset logic)
                // Since fly elements are absolutely positioned relative to container, we need relative coordinates
                // But simplified for visual effect:
                // We know exactly where targets are: bottom-10 (approx 200px down) and spaced horizontally

                // Let's hardcode relative moves for robustness in this simple demo
                // container h-64 (256px). top-10 (40px). bottom-10 (40px from bottom).
                // deltaY approx 256 - 40 - 40 - height(40) = 136px down.

                // positions:
                // fly0: center - 70px. target0: center - around 120px? no, complex flex.
                // Let's use getBoundingClientRect properly relative to container

                const container = t.fly.parentElement.getBoundingClientRect();
                const flyRect = t.fly.getBoundingClientRect();
                const destRect = t.dest.getBoundingClientRect();

                const moveX = destRect.left - flyRect.left;
                const moveY = destRect.top - flyRect.top;

                t.fly.style.transform = `translate(${moveX}px, ${moveY}px)`;

                // On finish
                setTimeout(() => {
                    t.dest.innerText = t.val;
                    t.dest.classList.remove('border-dashed');
                    t.dest.classList.add('border-solid', 'bg-white');
                    t.fly.style.opacity = '0'; // Hide fly element after landing
                }, 1000 + (i * 200));
            });
        }

        // Slide 8 Methods Logic
        function initSlide8() {
            const containerInputs = document.getElementById('temas-inputs-container');
            const containerMemory = document.getElementById('methods-memory');
            const resultArea = document.getElementById('methods-result');
            if (!containerInputs || !containerMemory || !resultArea) return;

            resultArea.classList.add('opacity-0');
            resultArea.innerText = '';

            // Update Inputs in Code
            containerInputs.innerHTML = temasItems.map((v, i) => `
                <input type="text" id="tema-input-${i}" value="${v}" 
                    oninput="temasItems[${i}] = this.value; updateMethodsVisuals()"
                    class="w-16 border-b border-gray-300 rounded-none text-center bg-blue-50/30 text-xs focus:border-action outline-none">
            `).join(', ');

            // Update Memory Visualizer
            containerMemory.innerHTML = temasItems.map((v, i) => `
                <div id="tema-${i}" class="w-16 h-16 bg-white border-2 border-accent/20 rounded-xl flex flex-col items-center justify-center relative transition-all duration-300 shadow-sm">
                    <span class="text-[10px] font-bold text-body v-val text-center px-1">${v}</span>
                    <span class="absolute bottom-1 right-2 text-[10px] text-gray-400 font-mono">${i}</span>
                </div>
            `).join('');
        }

        function updateMethodsVisuals() {
            temasItems.forEach((v, i) => {
                const vis = document.getElementById(`tema-${i}`);
                if (vis) {
                    const valSpan = vis.querySelector('.v-val');
                    if (valSpan) valSpan.innerText = v;
                }
            });
        }

        function simulateMethods(method) {
            const resultArea = document.getElementById('methods-result');
            const items = temasItems.map((_, i) => document.getElementById(`tema-${i}`));
            const target = method === 'count'
                ? document.getElementById('count-target').value
                : document.getElementById('index-target').value;

            // Clear highlights
            items.forEach(el => el.classList.remove('ring-4', 'ring-action', 'bg-blue-50', 'scale-110', 'ring-green-400', 'bg-green-50'));
            resultArea.classList.remove('opacity-100', 'scale-100');
            resultArea.classList.add('opacity-0', 'scale-90', 'text-red-500');

            setTimeout(() => {
                if (method === 'count') {
                    let count = 0;
                    temasItems.forEach((t, i) => {
                        if (t === target) {
                            count++;
                            items[i].classList.add('ring-4', 'ring-action', 'bg-blue-50', 'scale-110');
                        }
                    });
                    resultArea.innerText = `Resultado temas.count("${target}"): ${count}`;
                    resultArea.classList.remove('text-green-600', 'text-red-500');
                    resultArea.classList.add('text-action');
                } else {
                    const idx = temasItems.indexOf(target);
                    if (idx !== -1) {
                        items[idx].classList.add('ring-4', 'ring-green-400', 'bg-green-50', 'scale-110');
                        resultArea.innerText = `√çndice encontrado temas.index("${target}"): ${idx}`;
                        resultArea.classList.remove('text-action', 'text-red-500');
                        resultArea.classList.add('text-green-600');
                    } else {
                        resultArea.innerText = `ValueError: "${target}" no est√° en tupla`;
                        resultArea.classList.add('text-red-500');
                    }
                }
                resultArea.classList.remove('opacity-0', 'scale-90');
                resultArea.classList.add('opacity-100', 'scale-100');
            }, 300);
        }

        function restartModule() {
            currentSlide = 1;
            updateSlide();
            // Clear console
            const consoleBox = document.getElementById('access-console');
            if (consoleBox) consoleBox.innerHTML = '';
            // Reset other states if needed
            mixtaCreated = false;
        }
    </script>
</body>

</html>