<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√≥dulo 1: Archivos</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            bg: '#ffffff',
                            alt: '#f1f5f9',
                            title: '#003c58',
                            accent: '#06717e',
                            btn: '#0055ad',
                            btnHover: '#399be2',
                            highlight: '#0f6cbf',
                            text: '#1e293b',
                            lightText: '#6ea2ee',
                            border: '#e2e8f0'
                        }
                    },
                    fontFamily: {
                        sans: ['-apple-system', 'BlinkMacSystemFont', '"Segoe UI"', 'Roboto', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom Animations & Styles */
        body {
            overflow: hidden;
        }

        .slide {
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            position: absolute;
            inset: 0;
            padding-top: 4rem;
            /* For Header */
        }

        .slide.active {
            display: flex;
            opacity: 1;
            z-index: 10;
        }

        /* MacOS Window Styles */
        .mac-window {
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border: 1px solid #d1d5db;
            border-radius: 0.75rem;
            overflow: hidden;
            background: #fff;
            display: flex;
            flex-direction: column;
        }

        .mac-header {
            background: #eef0f2;
            padding: 0.75rem 1rem;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #d1d5db;
        }

        .mac-dots {
            display: flex;
            gap: 0.5rem;
        }

        .mac-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .mac-red {
            background: #ff5f57;
            border: 1px solid #e0443e;
        }

        .mac-yellow {
            background: #febc2e;
            border: 1px solid #d89e24;
        }

        .mac-green {
            background: #28c840;
            border: 1px solid #1aab29;
        }

        /* VS Light Code Editor */
        .vs-light {
            background-color: #ffffff;
            border: 1px solid #e2e8f0;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            color: #333;
        }

        .vs-line-num {
            color: #2b91af;
            margin-right: 1rem;
        }

        .vs-keyword {
            color: #0000ff;
        }

        .vs-string {
            color: #a31515;
        }

        .vs-function {
            color: #795e26;
        }

        .vs-comment {
            color: #008000;
        }

        /* Finder Sidebar */
        .finder-sidebar-item {
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            cursor: default;
            display: flex;
            gap: 0.5rem;
            align-items: center;
            color: #4b5563;
        }

        .finder-sidebar-item.active {
            background-color: #cbd5e1;
            color: #1e293b;
        }

        /* Animations */
        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .scale-in {
            animation: scaleIn 0.3s ease-out forwards;
        }

        @keyframes bounceX {

            0%,
            100% {
                transform: translateX(0);
            }

            50% {
                transform: translateX(10px);
            }
        }

        .animate-bounce-x {
            animation: bounceX 1s infinite;
        }

        @keyframes flowPulse {
            0% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(15, 108, 191, 0.4);
            }

            70% {
                transform: scale(1.02);
                box-shadow: 0 0 0 10px rgba(15, 108, 191, 0);
            }

            100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(15, 108, 191, 0);
            }
        }

        .animate-flow {
            animation: flowPulse 2s infinite;
        }
    </style>
</head>

<body class="bg-brand-bg text-brand-text h-screen w-screen relative selection:bg-brand-highlight selection:text-white">

    <!-- Header (Progress) -->
    <header
        class="fixed top-0 left-0 right-0 h-16 bg-brand-bg/90 backdrop-blur border-b border-brand-border z-50 flex items-center justify-between px-8">
        <h1 class="text-xl font-bold text-brand-title flex items-center gap-3">
            <span class="text-2xl">üìÅ</span> M√≥dulo 1: Archivos en Python
        </h1>
        <div class="text-brand-accent font-medium text-lg">
            <span id="current-slide-num">1</span> / <span id="total-slides-num">18</span>
        </div>
    </header>

    <!-- Main Content Area -->
    <main id="app-container" class="relative w-full h-full">
        <!-- Slides will be injected here or defined below -->

        <!-- SLIDE 1: Portada -->
        <section class="slide active flex-col justify-center items-center text-center space-y-8" id="slide-0">
            <div
                class="w-32 h-32 bg-blue-100 rounded-3xl flex items-center justify-center text-6xl shadow-xl transform rotate-3">
                üìÇ
            </div>
            <h1 class="text-6xl font-extrabold text-brand-title tracking-tight">Archivos</h1>
            <p class="text-2xl text-slate-500 font-light max-w-2xl">
                Ubicaci√≥n, lectura y escritura de datos persistentes en Python 3
            </p>
            <button onclick="nextSlide()"
                class="mt-12 px-10 py-4 bg-brand-btn text-white text-xl font-bold rounded-full shadow-lg hover:bg-brand-btnHover transition-all transform hover:scale-105">
                Comenzar la Experiencia
            </button>
        </section>

        <!-- SLIDE 2: Introducci√≥n -->
        <section class="slide flex-col p-12 justify-center items-center" id="slide-1">
            <h2 class="text-5xl font-bold text-brand-title mb-12">¬øQu√© es un archivo?</h2>
            <div class="flex gap-16 w-full max-w-6xl items-center">
                <div class="w-1/2 space-y-8 text-2xl text-slate-600 leading-relaxed">
                    <p><strong class="text-brand-accent">Persistencias:</strong> Los archivos permiten guardar datos de
                        forma permanente en el disco duro, a diferencia de la RAM que es vol√°til.</p>
                    <p>Se organizan en <span class="bg-blue-100 text-brand-title px-2 py-1 rounded">Carpetas</span> y
                        directorios.</p>
                </div>
                <div class="w-1/2 mac-window h-96 bg-slate-50">
                    <div class="mac-header">
                        <div class="mac-dots">
                            <div class="mac-dot mac-red"></div>
                            <div class="mac-dot mac-yellow"></div>
                            <div class="mac-dot mac-green"></div>
                        </div>
                        <span class="ml-4 text-sm text-gray-500 font-medium">Macintosh HD</span>
                    </div>
                    <div class="flex h-full">
                        <div class="w-1/3 bg-slate-100 border-r border-slate-200 p-4 space-y-2">
                            <div class="finder-sidebar-item active">üñ•Ô∏è Escritorio</div>
                            <div class="finder-sidebar-item">üìÑ Documentos</div>
                            <div class="finder-sidebar-item">‚¨áÔ∏è Descargas</div>
                        </div>
                        <div class="flex-1 p-6 grid grid-cols-3 gap-4 content-start">
                            <div
                                class="flex flex-col items-center gap-2 p-2 hover:bg-blue-100 rounded cursor-pointer transition">
                                <span class="text-4xl">üìÅ</span>
                                <span class="text-xs text-center">Proyectos</span>
                            </div>
                            <div
                                class="flex flex-col items-center gap-2 p-2 hover:bg-blue-100 rounded cursor-pointer transition">
                                <span class="text-4xl">üìÑ</span>
                                <span class="text-xs text-center">notas.txt</span>
                            </div>
                            <div
                                class="flex flex-col items-center gap-2 p-2 hover:bg-blue-100 rounded cursor-pointer transition">
                                <span class="text-4xl">üêç</span>
                                <span class="text-xs text-center">main.py</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 3: Componentes -->
        <section class="slide flex-col pt-24 px-12 pb-12 justify-center items-center" id="slide-2">
            <h2 class="text-5xl font-bold text-brand-title mb-16">Componentes de un Archivo</h2>

            <div class="bg-white p-12 rounded-2xl shadow-2xl border border-slate-100 flex items-center justify-center space-x-2 text-6xl font-mono relative group"
                id="path-interaction">
                <!-- Interactive Path Parts -->
                <span class="hover:text-red-500 hover:bg-red-50 p-2 rounded cursor-help transition relative part"
                    data-info="Unidad">C:</span>
                <span class="text-slate-300">\</span>
                <span class="hover:text-orange-500 hover:bg-orange-50 p-2 rounded cursor-help transition relative part"
                    data-info="Carpeta">Usuario</span>
                <span class="text-slate-300">\</span>
                <span class="hover:text-green-500 hover:bg-green-50 p-2 rounded cursor-help transition relative part"
                    data-info="Nombre">datos</span>
                <span class="hover:text-brand-btn hover:bg-blue-50 p-2 rounded cursor-help transition relative part"
                    data-info="Extensi√≥n">.csv</span>
            </div>

            <div id="path-info-box"
                class="h-24 mt-12 text-3xl font-medium text-brand-accent transition-all opacity-0 transform translate-y-4">
                <!-- Info text injected here -->
            </div>

            <p class="text-slate-400 mt-8 text-lg">Pasa el mouse sobre las partes para identificar la estructura</p>
        </section>

        <!-- SLIDE 4 (New): Tipos de Rutas -->
        <section class="slide flex-col pt-24 px-12 pb-12 justify-center items-center bg-slate-50/50"
            id="slide-paths-expl">
            <h2 class="text-5xl font-bold text-brand-title mb-12">Rutas Absolutas vs Relativas</h2>

            <div class="grid grid-cols-2 gap-12 w-full max-w-6xl">
                <!-- Absolute Card -->
                <div
                    class="bg-white p-8 rounded-3xl shadow-xl border border-slate-100 flex flex-col items-center text-center group hover:scale-105 transition-transform duration-500">
                    <div
                        class="w-20 h-20 bg-blue-100 rounded-2xl flex items-center justify-center text-4xl mb-6 shadow-inner">
                        üåé</div>
                    <h3 class="text-3xl font-extrabold text-blue-900 mb-4">Ruta Absoluta</h3>
                    <p class="text-xl text-slate-500 mb-8 leading-relaxed">
                        Es la <b>direcci√≥n completa</b> desde el origen del disco duro.<br>
                        <span class="text-brand-accent font-medium block mt-2">No depende de d√≥nde estemos.</span>
                    </p>
                    <div
                        class="bg-slate-900 text-blue-300 font-mono p-4 rounded-xl text-sm w-full shadow-lg border border-slate-700">
                        /Users/Programacion/Clase01/datos.txt
                    </div>
                </div>

                <!-- Relative Card -->
                <div
                    class="bg-white p-8 rounded-3xl shadow-xl border border-slate-100 flex flex-col items-center text-center group hover:scale-105 transition-transform duration-500">
                    <div
                        class="w-20 h-20 bg-brand-alt rounded-2xl flex items-center justify-center text-4xl mb-6 shadow-inner">
                        üìç</div>
                    <h3 class="text-3xl font-extrabold text-brand-btn mb-4">Ruta Relativa</h3>
                    <p class="text-xl text-slate-500 mb-8 leading-relaxed">
                        Es el <b>camino corto</b> desde nuestra carpeta actual.<br>
                        <span class="text-brand-highlight font-medium block mt-2">Var√≠a seg√∫n el lugar de
                            ejecuci√≥n.</span>
                    </p>
                    <div
                        class="bg-brand-btn text-white font-mono p-4 rounded-xl text-lg w-full shadow-lg border border-blue-400">
                        datos.txt
                    </div>
                </div>
            </div>

            <p class="mt-16 text-slate-400 italic text-lg">"La ruta relativa es la que usaremos principalmente en
                nuestros programas"</p>
        </section>

        <!-- SLIDE 5: Rutas (Explorer Custom) -->
        <section class="slide flex-col pt-24 px-8 pb-8 items-center" id="slide-3">
            <div class="max-w-6xl mx-auto w-full h-full flex flex-col">
                <h2 class="text-4xl font-bold text-brand-title mb-2">Explorador de Rutas</h2>
                <p class="text-slate-500 mb-6 text-xl">Navega por las carpetas y haz click en los archivos para entender
                    las rutas.</p>

                <div
                    class="flex-1 bg-white border border-slate-200 rounded-xl shadow-xl flex overflow-hidden min-h-[500px]">

                    <!-- Sidebar (Tree) -->
                    <div class="w-1/3 bg-slate-50 border-r border-slate-200 flex flex-col">
                        <div
                            class="p-3 border-b border-slate-200 bg-slate-100/50 text-xs font-bold text-slate-400 uppercase tracking-wide flex items-center gap-2">
                            <span class="w-2.5 h-2.5 rounded-full bg-red-400"></span>
                            <span class="w-2.5 h-2.5 rounded-full bg-yellow-400"></span>
                            <span class="w-2.5 h-2.5 rounded-full bg-green-400"></span>
                            <span class="ml-auto opacity-50">Explorador</span>
                        </div>
                        <div class="p-4 space-y-1 overflow-y-auto" id="explorer-sidebar">
                            <!-- Tree Items -->
                            <div class="cursor-pointer flex items-center gap-2 p-2 rounded hover:bg-blue-100 transition-colors text-sm text-slate-700 font-mono group"
                                onclick="navExplorer('root')">
                                <span class="group-hover:scale-110 transition">üñ•Ô∏è</span> /
                            </div>
                            <div class="ml-4 cursor-pointer flex items-center gap-2 p-2 rounded hover:bg-blue-100 transition-colors text-sm text-slate-700 font-mono group"
                                onclick="navExplorer('users')">
                                <span class="group-hover:scale-110 transition">üìÇ</span> Users
                            </div>
                            <div class="ml-8 cursor-pointer flex items-center gap-2 p-2 rounded hover:bg-blue-100 transition-colors text-sm text-slate-700 font-mono group"
                                onclick="navExplorer('programacion')">
                                <span class="group-hover:scale-110 transition">üìÇ</span> Programaci√≥n
                            </div>
                            <div class="ml-12 cursor-pointer flex items-center gap-2 p-2 rounded hover:bg-blue-100 transition-colors text-sm font-bold text-brand-btn font-mono bg-blue-50 group border border-blue-100 shadow-sm"
                                onclick="navExplorer('project')">
                                <span class="group-hover:scale-110 transition">üìÇ</span> Clase01 <span
                                    class="text-[10px] bg-brand-accent text-white ml-2 rounded px-1.5 py-0.5">Estas
                                    aqu√≠</span>
                            </div>
                            <div class="ml-16 cursor-pointer flex items-center gap-2 p-2 rounded hover:bg-blue-100 transition-colors text-sm text-slate-700 font-mono group"
                                onclick="navExplorer('encuestas')">
                                <span class="group-hover:scale-110 transition">üìÇ</span> encuestas
                            </div>
                        </div>
                    </div>

                    <!-- Main View (Files) -->
                    <div class="flex-1 flex flex-col bg-white">
                        <!-- Address Bar -->
                        <div class="p-3 border-b border-slate-200 flex items-center gap-3 bg-white shadow-sm z-10">
                            <button onclick="explorerUp()"
                                class="text-slate-400 hover:text-brand-btn disabled:opacity-30 transition"
                                id="explorer-up-btn">‚¨Ü</button>
                            <div
                                class="flex-1 bg-slate-100 border border-slate-200 rounded px-3 py-1.5 text-sm font-mono text-slate-600 flex items-center">
                                <span id="address-bar">/Users/Programacion/Clase01</span>
                            </div>
                        </div>

                        <!-- File Grid -->
                        <div class="flex-1 p-6 bg-slate-50/30 overflow-y-auto">
                            <div id="file-grid" class="grid grid-cols-4 gap-4 content-start">
                                <!-- Items Injected by JS -->
                            </div>
                        </div>

                        <!-- Info Panel (Bottom) -->
                        <div class="h-48 bg-white border-t border-slate-200 p-6 shadow-[0_-5px_15px_rgba(0,0,0,0.02)]">
                            <div id="selection-info" class="hidden h-full">
                                <div class="flex gap-6 h-full items-start">
                                    <div class="text-6xl bg-slate-50 p-4 rounded-xl border border-slate-100"
                                        id="sel-icon">üìÑ</div>
                                    <div class="flex-1 flex flex-col justify-between h-full">
                                        <div>
                                            <h4 class="font-bold text-xl text-brand-title flex items-center gap-2">
                                                <span id="sel-filename">archivo.txt</span>
                                                <span class="text-xs font-normal text-slate-400 border px-1 rounded"
                                                    id="sel-type">ARCHIVO</span>
                                            </h4>
                                        </div>

                                        <div class="grid grid-cols-1 gap-3 w-full">
                                            <div
                                                class="bg-slate-50 px-4 py-2 rounded-lg border border-slate-200 flex items-center gap-4 group hover:border-brand-highlight/30 transition">
                                                <span
                                                    class="text-xs font-bold text-slate-500 uppercase w-24 tracking-wider">Ruta
                                                    Absoluta</span>
                                                <code
                                                    class="text-sm font-mono text-slate-700 break-all select-all flex-1"
                                                    id="sel-abs">/...</code>
                                            </div>
                                            <div
                                                class="bg-brand-alt/50 px-4 py-2 rounded-lg border border-blue-200 flex items-center gap-4 group hover:bg-blue-50 transition">
                                                <span
                                                    class="text-xs font-bold text-brand-btn uppercase w-24 tracking-wider">Ruta
                                                    Relativa</span>
                                                <code
                                                    class="text-lg font-bold font-mono text-brand-btn select-all flex-1"
                                                    id="sel-rel">...</code>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="no-selection"
                                class="h-full flex flex-col items-center justify-center text-slate-300 gap-2">
                                <div class="text-4xl">üëÜ</div>
                                <div class="font-medium">Selecciona un archivo para inspeccionar sus rutas</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 5: Transici√≥n -->
        <section class="slide flex-col justify-center items-center bg-brand-alt" id="slide-4">
            <h1 class="text-6xl font-light text-brand-title mb-6">Uso en Python</h1>
            <div class="w-24 h-1 bg-brand-accent rounded-full"></div>
            <p class="mt-6 text-xl text-slate-500">Funciones nativas para manipulaci√≥n de archivos</p>
        </section>

        <!-- SLIDE 7: La Funci√≥n open() -->
        <section class="slide flex-col pt-24 px-12 pb-12 items-center" id="slide-5">
            <h2 class="text-4xl font-bold text-brand-title mb-8">Abriendo un Archivo</h2>

            <!-- Code Block with Breakdown -->
            <div
                class="w-full max-w-5xl vs-light p-10 rounded-2xl shadow-xl text-3xl mb-10 border-2 border-slate-100 relative group">
                <div class="font-mono flex items-center justify-center gap-2">
                    <span class="vs-keyword">archivo</span> = <span class="vs-function">open</span>(
                    <span class="px-2 py-1 bg-blue-50 border border-blue-200 rounded text-brand-btn"
                        title="Ruta Relativa">"datos.txt"</span>,
                    <span class="px-2 py-1 bg-red-50 border border-red-200 rounded text-red-600"
                        title="Modo">"r"</span>,
                    <span class="px-2 py-1 bg-green-50 border border-green-200 rounded text-green-700"
                        title="Codificaci√≥n">encoding="utf-8"</span>
                    )
                </div>
            </div>

            <!-- Parameters Grid -->
            <div class="grid grid-cols-3 gap-8 w-full max-w-6xl">
                <!-- Path -->
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                    <div class="text-brand-btn font-bold text-sm uppercase mb-2 tracking-widest">1. rutaArchivo</div>
                    <p class="text-slate-600 text-lg leading-snug">
                        Usamos la <b>Ruta Relativa</b>.<br>
                        Es el nombre del archivo si est√° en la misma carpeta que nuestro script.
                    </p>
                </div>

                <!-- Mode -->
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm relative">
                    <div class="text-red-500 font-bold text-sm uppercase mb-2 tracking-widest">2. modo</div>
                    <div class="grid grid-cols-2 gap-2 text-xs font-bold">
                        <div class="bg-blue-50 p-2 rounded border border-blue-100 text-brand-title">"r" Lectura</div>
                        <div class="bg-red-50 p-2 rounded border border-red-100 text-red-700">"w" Escritura</div>
                        <div class="bg-green-50 p-2 rounded border border-green-100 text-green-700">"a" Anexar</div>
                        <div class="bg-orange-50 p-2 rounded border border-orange-100 text-orange-700">"r+" Dual</div>
                    </div>
                </div>

                <!-- Encoding -->
                <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm">
                    <div class="text-green-600 font-bold text-sm uppercase mb-2 tracking-widest">3. codificaci√≥n</div>
                    <p class="text-slate-600 text-lg leading-snug">
                        Le dice a Python c√≥mo interpretar los caracteres especiales (como acentos o la √±).<br>
                        <code class="text-sm bg-slate-100 px-1 rounded">"utf-8"</code> es el est√°ndar universal.
                    </p>
                </div>
            </div>

            <p class="mt-10 text-slate-400 text-lg">üí° Al terminar de usarlo, siempre debemos cerrarlo con <code
                    class="font-bold">archivo.close()</code></p>
        </section>

        <!-- SLIDE 8: Cambio de Rutas (Example) -->
        <section class="slide flex-col pt-20 px-8 pb-4 items-center" id="slide-6">
            <h2 class="text-4xl font-bold text-brand-title mb-2">Pr√°ctica de Lectura</h2>
            <p class="text-slate-500 mb-4 text-lg">Haz clic en un archivo del explorador para generar el c√≥digo y ver el
                resultado.</p>

            <div class="flex flex-col w-full max-w-6xl gap-4 flex-1">
                <!-- Top Row: Code and Files -->
                <div class="flex gap-4 h-[280px]">
                    <!-- Code Pane (Left) -->
                    <div class="w-1/2 mac-window bg-[#1e1e1e] flex flex-col shadow-xl">
                        <div class="mac-header border-b border-white/10">
                            <span class="ml-2 text-[10px] text-gray-400 font-mono">script.py ‚Äî VS Code</span>
                        </div>
                        <div class="flex-1 p-6 font-mono text-lg leading-relaxed text-blue-300">
                            <span class="text-pink-400">archivo</span> = <span class="text-yellow-200">open</span>(<span
                                class="text-orange-300" id="demo-path-code">"..."</span>, <span
                                class="text-orange-300">"r"</span>)<br>
                            <span class="text-blue-200">contenido</span> = archivo.<span
                                class="text-yellow-200">read</span>()<br>
                            <span class="text-yellow-200">print</span>(contenido)<br>
                            archivo.<span class="text-yellow-200">close</span>()
                        </div>
                    </div>

                    <!-- Files Pane (Right - Finder Style) -->
                    <div class="w-1/2 mac-window bg-white flex flex-col shadow-xl border border-slate-200">
                        <div class="mac-header bg-slate-50 border-b border-slate-200">
                            <span class="ml-2 text-[10px] text-slate-500 font-bold uppercase tracking-wider">Carpeta de
                                Proyecto</span>
                        </div>
                        <div class="flex-1 p-4 grid grid-cols-2 gap-4 bg-slate-50/30 overflow-y-auto"
                            id="read-files-grid">
                            <!-- Simple Path -->
                            <div onclick="loadFileDemo('datos.txt', 'datos.txt', 'Ventas: 500\nGastos: 200\nTotal: 300')"
                                class="cursor-pointer bg-white border border-slate-200 p-3 rounded-lg flex items-center gap-3 hover:bg-blue-50 hover:border-blue-200 transition group shadow-sm">
                                <span class="text-2xl group-hover:scale-110 transition">üìÑ</span>
                                <div class="overflow-hidden">
                                    <div class="text-xs font-bold text-slate-700 truncate">datos.txt</div>
                                    <div class="text-[10px] text-slate-400 font-mono">/</div>
                                </div>
                            </div>
                            <!-- Nested Path -->
                            <div onclick="loadFileDemo('enero.csv', 'encuestas/enero.csv', 'id,valor\n1,10\n2,25\n3,14')"
                                class="cursor-pointer bg-white border border-slate-200 p-3 rounded-lg flex items-center gap-3 hover:bg-blue-50 hover:border-blue-200 transition group shadow-sm">
                                <span class="text-2xl group-hover:scale-110 transition">üìä</span>
                                <div class="overflow-hidden">
                                    <div class="text-xs font-bold text-slate-700 truncate">enero.csv</div>
                                    <div class="text-[10px] text-slate-400 font-mono">/encuestas</div>
                                </div>
                            </div>
                            <!-- Simple Path -->
                            <div onclick="loadFileDemo('notas.txt', 'notas.txt', 'Estudiar Python\nPracticar Archivos\nCompletar Lab')"
                                class="cursor-pointer bg-white border border-slate-200 p-3 rounded-lg flex items-center gap-3 hover:bg-blue-50 hover:border-blue-200 transition group shadow-sm">
                                <span class="text-2xl group-hover:scale-110 transition">üìù</span>
                                <div class="overflow-hidden">
                                    <div class="text-xs font-bold text-slate-700 truncate">notas.txt</div>
                                    <div class="text-[10px] text-slate-400 font-mono">/</div>
                                </div>
                            </div>
                            <!-- Nested Path -->
                            <div onclick="loadFileDemo('alumnos.txt', 'data/alumnos.txt', 'Alumno1\nAlumno2\nAlumno3')"
                                class="cursor-pointer bg-white border border-slate-200 p-3 rounded-lg flex items-center gap-3 hover:bg-blue-50 hover:border-blue-200 transition group shadow-sm">
                                <span class="text-2xl group-hover:scale-110 transition">üë•</span>
                                <div class="overflow-hidden">
                                    <div class="text-xs font-bold text-slate-700 truncate">alumnos.txt</div>
                                    <div class="text-[10px] text-slate-400 font-mono">/data</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Terminal Below -->
                <div class="mac-window bg-[#0c0c0c] flex flex-col shadow-2xl h-[220px] border border-white/5">
                    <div class="mac-header border-b border-white/5 bg-[#1a1a1a]">
                        <span class="ml-2 text-[10px] text-gray-500 font-mono">Terminal ‚Äî python3 script.py</span>
                    </div>
                    <div class="flex-1 px-6 py-3 font-mono text-lg text-emerald-400 overflow-auto" id="demo-output">
                        <span class="opacity-40">Esperando ejecuci√≥n... (Haz clic en un archivo)</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 9 (New): ¬øPor qu√© usar Try Except? -->
        <section class="slide flex-col pt-24 px-12 items-center" id="slide-comic">
            <div class="max-w-4xl text-center mb-12">
                <h2 class="text-5xl font-extrabold text-brand-title mb-4">¬øPor qu√© proteger nuestro c√≥digo?</h2>
                <p class="text-2xl text-slate-500">Un error inesperado (como un archivo faltante) puede detener todo
                    nuestro programa de forma brusca.</p>
            </div>

            <div class="flex gap-16 items-start justify-center w-full max-w-6xl">
                <!-- Case 1: Without Try -->
                <div class="flex-1 flex flex-col items-center group">
                    <div
                        class="mb-6 px-4 py-2 bg-red-100 text-red-700 rounded-full text-sm font-black uppercase tracking-widest shadow-sm">
                        ‚ùå Sin Try Except</div>
                    <div
                        class="relative w-full h-48 bg-slate-50 rounded-3xl border-4 border-dashed border-slate-200 flex items-center justify-around overflow-hidden shadow-inner">
                        <div id="bug-bad" class="text-5xl absolute -left-16 drop-shadow-lg z-20">üëæ</div>
                        <div id="code-bad" class="flex flex-col items-center transition-all duration-300">
                            <div class="text-6xl mb-2 drop-shadow-md">üìÑ</div>
                            <span class="font-mono text-xs bg-white px-2 py-1 rounded border shadow-sm">Codigo.py</span>
                        </div>
                        <div id="boom"
                            class="absolute inset-0 flex items-center justify-center text-8xl opacity-0 transform scale-0 transition-all pointer-events-none z-30">
                            üí•</div>
                    </div>
                    <p class="mt-6 text-slate-400 text-lg italic text-center">"El programa explota y se cierra solo"</p>
                </div>

                <!-- Case 2: With Try -->
                <div class="flex-1 flex flex-col items-center group">
                    <div
                        class="mb-6 px-4 py-2 bg-green-100 text-green-700 rounded-full text-sm font-black uppercase tracking-widest shadow-sm">
                        üõ°Ô∏è Con Try Except</div>
                    <div
                        class="relative w-full h-48 bg-slate-50 rounded-3xl border-4 border-dashed border-slate-200 flex items-center justify-around overflow-hidden shadow-inner px-8">
                        <div id="bug-good" class="text-5xl absolute -left-16 drop-shadow-lg z-20">üëæ</div>
                        <div class="h-full w-4 flex items-center justify-center relative">
                            <div id="shield"
                                class="w-2 h-32 bg-green-500 rounded-full shadow-[0_0_20px_rgba(34,197,94,0.6)] flex items-center justify-center transition-all transform scale-y-0 opacity-0 border-2 border-white">
                                <span class="text-[8px] text-white font-black whitespace-nowrap -rotate-90">TRY
                                    EXCEPT</span>
                            </div>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="text-6xl mb-2 drop-shadow-md">üìÑ</div>
                            <span class="font-mono text-xs bg-white px-2 py-1 rounded border shadow-sm">Codigo.py</span>
                        </div>
                    </div>
                    <p class="mt-6 text-slate-400 text-lg italic text-center">"El error es capturado y el programa
                        sigue"</p>
                </div>
            </div>

            <button onclick="runComic()"
                class="mt-12 px-10 py-5 bg-brand-btn text-white rounded-2xl text-2xl font-black shadow-xl hover:scale-105 hover:bg-blue-700 transition active:scale-95 flex items-center gap-3">
                <span>‚ñ∂Ô∏è Lanzar Error</span>
            </button>
        </section>

        <!-- SLIDE 10: Try / Except -->
        <section class="slide flex-col pt-24 px-12 pb-12 items-center justify-center" id="slide-7">
            <h2 class="text-4xl font-bold text-brand-title mb-4">Manejo de Errores: try / except</h2>
            <p class="text-xl text-slate-500 mb-12 text-center max-w-3xl">
                Usamos <span class="text-brand-accent font-bold">try</span> para probar c√≥digo que puede fallar,
                <span class="text-red-500 font-bold">except</span> para capturar el error si ocurre, y
                <span class="text-green-600 font-bold">else</span> para el c√≥digo que corre solo si todo sali√≥ bien.
            </p>

            <div class="flex gap-12 items-center">
                <!-- Toggle -->
                <div class="flex flex-col gap-4">
                    <button onclick="toggleFileExistence(true)"
                        class="px-6 py-3 rounded-lg border-2 border-slate-200 text-slate-400 hover:border-green-500 hover:text-green-500 transition"
                        id="btn-exist-true">‚úÖ El archivo existe</button>
                    <button onclick="toggleFileExistence(false)"
                        class="px-6 py-3 rounded-lg border-2 border-slate-200 text-slate-400 hover:border-red-500 hover:text-red-500 transition"
                        id="btn-exist-false">‚ùå No existe</button>
                </div>

                <!-- Block Diagram Code -->
                <div class="vs-light p-8 rounded-xl shadow-2xl text-xl w-[650px] flex flex-col gap-1">
                    <div class="p-2 transition rounded" id="block-var">
                        <span class="vs-keyword">rutaArchivo</span> = <span class="vs-string">"datos.txt"</span>
                    </div>
                    <div class="p-2 transition rounded" id="block-try">
                        <span class="vs-keyword">try</span>:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;archivo = <span class="vs-function">open</span>(rutaArchivo, <span
                            class="vs-string">"r"</span>)
                    </div>
                    <div class="p-2 transition rounded" id="block-except">
                        <span class="vs-keyword">except</span>:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="vs-function">print</span>(<span class="vs-string">"El
                            archivo no existe"</span>)
                    </div>
                    <div class="p-2 transition rounded" id="block-else">
                        <span class="vs-keyword">else</span>:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="vs-function">print</span>(<span class="vs-string">"El
                            archivo se abri√≥ correctamente"</span>)<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;contenido = archivo.<span class="vs-function">read</span>()<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="vs-function">print</span>(contenido)<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;archivo.<span class="vs-function">close</span>()
                    </div>
                </div>

                <!-- Result -->
                <div class="w-64">
                    <div id="try-result-arrow" class="text-4xl text-slate-300 mb-4 transition-all">‚ûú</div>
                    <div id="try-result-msg"
                        class="text-2xl font-bold p-4 rounded-lg bg-slate-100 text-slate-500 transition-all">
                        Selecciona una opci√≥n
                    </div>
                </div>
            </div>
        </section>

        <!-- ... (Continuing with the rest of the slides in a moment dynamically via JS if file size gets too big, but text size is fine here) ... -->
        <!-- Just doing all slides in one go -->

        <!-- SLIDE 11: with open() -->
        <section class="slide flex-col pt-24 px-12 items-center" id="slide-8">
            <h2 class="text-4xl font-bold text-brand-title mb-4">Una alternativa: <code
                    class="bg-blue-50 px-2 rounded">with open()</code></h2>
            <p class="text-xl text-slate-500 mb-12 text-center max-w-3xl">
                Es otra manera de trabajar con archivos en Python.
                Su gran ventaja es que se encarga de <b>cerrar el archivo autom√°ticamente</b>.
            </p>

            <div class="grid grid-cols-2 gap-12 w-full max-w-6xl">
                <!-- Manual way -->
                <div class="flex flex-col gap-4">
                    <div class="text-xs font-bold text-slate-400 uppercase tracking-widest text-center">Gesti√≥n Manual
                    </div>
                    <div class="vs-light p-6 rounded-xl border-2 border-slate-100 shadow-lg font-mono text-lg h-full">
                        <div class="opacity-50 text-sm mb-2"># Debes recordar cerrarlo</div>
                        archivo = <span class="vs-function">open</span>(<span class="vs-string">"datos.txt"</span>,
                        <span class="vs-string">"r"</span>)<br>
                        contenido = archivo.<span class="vs-function">read</span>()<br>
                        <span class="vs-function">print</span>(contenido)<br>
                        <span class="text-red-500 font-bold italic">archivo.close()</span>
                    </div>
                </div>

                <!-- With way -->
                <div class="flex flex-col gap-4">
                    <div class="text-xs font-bold text-brand-btn uppercase tracking-widest text-center">Uso de with
                    </div>
                    <div
                        class="vs-light p-6 rounded-xl border-2 border-brand-btn/30 shadow-xl font-mono text-lg relative overflow-hidden h-full">
                        <div class="absolute top-0 right-0 bg-brand-btn text-white text-[10px] px-3 py-1 font-bold">
                            AUTOM√ÅTICO</div>
                        <span class="vs-keyword">with</span> <span class="vs-function">open</span>(<span
                            class="vs-string">"datos.txt"</span>, <span class="vs-string">"r"</span>) <span
                            class="vs-keyword">as</span> archivo:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;contenido = archivo.<span class="vs-function">read</span>()<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="vs-function">print</span>(contenido)<br>
                        <div
                            class="mt-8 pt-4 border-t border-dashed border-slate-200 text-sm text-green-600 font-sans italic">
                            ‚ú® El archivo se cierra solo al terminar el bloque.
                        </div>
                    </div>
                </div>
            </div>

            <div
                class="mt-12 bg-amber-50 border border-amber-100 p-6 rounded-2xl flex items-center gap-6 max-w-4xl shadow-sm">
                <div class="text-4xl">‚ö†Ô∏è</div>
                <p class="text-slate-600 text-lg leading-relaxed">
                    <b>Recordatorio Importante:</b> Aunque <code class="font-bold">with</code> cierra el archivo solo,
                    <b>a√∫n debes usar <code class="text-brand-accent font-bold">try-except</code></b> para evitar que el
                    programa falle si el archivo no existe o no se puede abrir.
                </p>
            </div>
        </section>

        <!-- SLIDE 12: Formas de Leer Intro -->
        <section class="slide flex-col pt-24 px-12 items-center" id="slide-9">
            <h2 class="text-5xl font-extrabold text-brand-title mb-6">Lectura de Archivos</h2>
            <p class="text-2xl text-slate-500 mb-12 text-center max-w-4xl">
                Una vez abierto el archivo, Python nos ofrece tres herramientas principales para extraer su informaci√≥n:
            </p>

            <div class="grid grid-cols-3 gap-8 w-full max-w-6xl">
                <!-- read() -->
                <div
                    class="bg-white p-8 rounded-3xl shadow-xl border border-slate-100 flex flex-col items-center text-center hover:scale-105 transition-transform duration-300 group">
                    <div
                        class="w-16 h-16 bg-blue-100 rounded-2xl flex items-center justify-center text-3xl mb-6 shadow-inner group-hover:bg-blue-200 transition-colors">
                        üìñ</div>
                    <code class="text-2xl font-bold font-mono text-brand-btn mb-4">read()</code>
                    <p class="text-lg text-slate-500 leading-relaxed">
                        Extrae <b>todo el contenido</b> del archivo como un solo texto gigante.
                    </p>
                    <div class="mt-auto pt-6 text-xs text-slate-400 font-medium uppercase tracking-widest">Todo de un
                        golpe</div>
                </div>

                <!-- readline() -->
                <div
                    class="bg-white p-8 rounded-3xl shadow-xl border border-slate-100 flex flex-col items-center text-center hover:scale-105 transition-transform duration-300 group">
                    <div
                        class="w-16 h-16 bg-green-100 rounded-2xl flex items-center justify-center text-3xl mb-6 shadow-inner group-hover:bg-green-200 transition-colors">
                        üìè</div>
                    <code class="text-2xl font-bold font-mono text-green-600 mb-4">readline()</code>
                    <p class="text-lg text-slate-500 leading-relaxed">
                        Lee el archivo <b>l√≠nea por l√≠nea</b>. Ideal para archivos muy grandes.
                    </p>
                    <div class="mt-auto pt-6 text-xs text-slate-400 font-medium uppercase tracking-widest">Una a la vez
                    </div>
                </div>

                <!-- readlines() -->
                <div
                    class="bg-white p-8 rounded-3xl shadow-xl border border-slate-100 flex flex-col items-center text-center hover:scale-105 transition-transform duration-300 group">
                    <div
                        class="w-16 h-16 bg-purple-100 rounded-2xl flex items-center justify-center text-3xl mb-6 shadow-inner group-hover:bg-purple-200 transition-colors">
                        üìã</div>
                    <code class="text-2xl font-bold font-mono text-purple-600 mb-4">readlines()</code>
                    <p class="text-lg text-slate-500 leading-relaxed">
                        Crea una <b>lista de Python</b> donde cada elemento es una l√≠nea del archivo.
                    </p>
                    <div class="mt-auto pt-6 text-xs text-slate-400 font-medium uppercase tracking-widest">Como una
                        lista</div>
                </div>
            </div>

            <p class="mt-16 text-slate-400 italic text-xl">"A continuaci√≥n, veremos c√≥mo funciona cada una en detalle."
            </p>
        </section>

        <!-- SLIDE 13: read() y read(N) -->
        <section class="slide flex-col pt-24 px-12 items-center" id="slide-13">
            <h2 class="text-4xl font-bold text-brand-title mb-8">M√©todo <code
                    class="bg-blue-50 px-2 rounded">read()</code>: Todo o por partes</h2>

            <div class="grid grid-cols-2 gap-12 w-full max-w-6xl mb-12">
                <!-- Option 1: Whole file -->
                <div class="bg-white p-6 rounded-2xl border-2 border-slate-100 shadow-lg">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-2xl">üìÑ</span>
                        <h3 class="text-xl font-bold text-brand-btn">Lectura Completa</h3>
                    </div>
                    <div class="vs-light p-4 rounded-lg font-mono text-sm mb-4">
                        contenido = archivo.<span class="vs-function">read</span>()
                    </div>
                    <p class="text-slate-600">Sin argumentos, devuelve <b>todo el archivo</b> como un √∫nico string. √ötil
                        para archivos peque√±os.</p>
                </div>

                <!-- Option 2: By characters -->
                <div class="bg-white p-6 rounded-2xl border-2 border-slate-100 shadow-lg">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-2xl">‚úÇÔ∏è</span>
                        <h3 class="text-xl font-bold text-brand-btn">Lectura Parcial</h3>
                    </div>
                    <div class="vs-light p-4 rounded-lg font-mono text-sm mb-4">
                        fragmento = archivo.<span class="vs-function">read</span>(<span class="vs-string">5</span>)
                    </div>
                    <p class="text-slate-600">Si pasas un n√∫mero <b>N</b>, lee solo los siguientes N caracteres desde
                        donde se qued√≥ el puntero.</p>
                </div>
            </div>

            <!-- Interactive Demo -->
            <div
                class="w-full max-w-4xl bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden flex flex-col">
                <div
                    class="bg-slate-100 p-2 border-b text-xs uppercase font-bold text-slate-500 tracking-wider text-center">
                    Visualizaci√≥n del Puntero con <code class="font-mono">read(N)</code>
                </div>
                <div class="p-8 text-4xl font-mono tracking-widest break-all relative bg-white"
                    id="char-stream-container">
                    <!-- Content -->
                    <span id="char-stream-text" class="text-slate-200">Hola_Mundo_Python</span>
                    <!-- Cursor -->
                    <div id="read-cursor"
                        class="absolute top-8 left-8 w-0.5 h-10 bg-red-500 animate-pulse transition-all duration-500">
                    </div>
                </div>
                Ejecutar .read(5)
                </button>
                <div class="vs-light p-3 rounded w-64 text-center border text-lg">
                    Cargado: "<span id="read-buffer" class="font-bold text-brand-accent"></span>"
                </div>
                <button onclick="resetReadChars()" class="text-slate-400 text-sm hover:underline">Reiniciar
                    puntero</button>
            </div>
        </section>

        <!-- SLIDE 14: Readline -->
        <section class="slide flex-col pt-24 px-12 pb-12 items-center" id="slide-14">
            <h2 class="text-4xl font-bold text-brand-title mb-6">Lectura de P√°rrafos: <span
                    class="font-mono text-brand-btn">readline()</span></h2>

            <div class="flex gap-8 w-full max-w-6xl">
                <!-- Code Editor Style -->
                <div class="w-1/2 vs-light p-6 rounded-lg text-lg font-mono leading-relaxed"
                    id="readline-code-container">
                    <div id="rl-line-1" class="px-2 rounded transition-colors whitespace-nowrap"><span
                            class="vs-variable">archivoParrafos</span> = <span class="vs-string">"datos.txt"</span>
                    </div>
                    <div class="h-2"></div>
                    <div id="rl-line-2" class="px-2 rounded transition-colors whitespace-nowrap"><span
                            class="vs-keyword">try</span>:</div>
                    <div id="rl-line-3" class="px-2 rounded transition-colors whitespace-nowrap">
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="vs-variable">textoParrafo</span> = <span
                            class="vs-function">open</span>(archivoParrafos, <span class="vs-string">"r"</span>)</div>
                    <div id="rl-line-4" class="px-2 rounded transition-colors whitespace-nowrap"><span
                            class="vs-keyword">except</span>:</div>
                    <div id="rl-line-5" class="px-2 rounded transition-colors whitespace-nowrap">
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="vs-function">print</span>(<span class="vs-string">f"Hubo un
                            error al abrir el archivo"</span>)</div>
                    <div id="rl-line-6" class="px-2 rounded transition-colors whitespace-nowrap"><span
                            class="vs-keyword">else</span>:</div>
                    <div id="rl-line-7" class="px-2 rounded transition-colors whitespace-nowrap">
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="vs-variable">parrafo</span> = textoParrafo.<span
                            class="vs-function">readline</span>()</div>
                    <div class="h-2"></div>
                    <div id="rl-line-8" class="px-2 rounded transition-colors whitespace-nowrap">
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="vs-keyword">while</span> parrafo != <span
                            class="vs-string">""</span>:</div>
                    <div id="rl-line-9" class="px-2 rounded transition-colors whitespace-nowrap">
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vs-function">print</span>(parrafo)
                    </div>
                    <div id="rl-line-10" class="px-2 rounded transition-colors whitespace-nowrap">
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vs-variable">parrafo</span> =
                        textoParrafo.<span class="vs-function">readline</span>()</div>
                    <div class="h-2"></div>
                    <div id="rl-line-11" class="px-2 rounded transition-colors whitespace-nowrap">
                        &nbsp;&nbsp;&nbsp;&nbsp;textoParrafo.<span class="vs-function">close</span>()</div>
                </div>

                <!-- File Preview -->
                <div class="w-1/2 bg-white border p-6 rounded-lg shadow-lg relative flex flex-col">
                    <div class="absolute -left-4 top-4 bg-brand-accent text-white text-xs px-2 py-1 rounded">datos.txt
                    </div>
                    <div class="space-y-4 font-mono text-xl mt-6 text-slate-400" id="poem-lines">
                        <div class="line-item p-2 rounded transition-all">P√°rrafo 1: Introducci√≥n a Python.</div>
                        <div class="line-item p-2 rounded transition-all">P√°rrafo 2: Manejo de archivos externos.</div>
                        <div class="line-item p-2 rounded transition-all">P√°rrafo 3: Cierre de recursos.</div>
                    </div>

                    <div class="mt-auto pt-8 border-t border-slate-100 flex flex-col gap-2">
                        <span class="text-xs font-bold text-slate-400 uppercase tracking-widest">Consola /
                            Pantalla</span>
                        <div class="bg-slate-900 text-green-400 p-4 rounded font-mono text-sm min-h-[80px]"
                            id="readline-output">
                            >_
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-8 flex gap-6">
                <button onclick="readLineNext()"
                    class="px-8 py-4 bg-brand-highlight text-white rounded-full font-bold shadow-lg hover:bg-blue-600 transition flex items-center gap-2">
                    <span>‚ñ∂Ô∏è Siguiente paso</span>
                </button>
                <button onclick="resetReadLineDemo()"
                    class="px-6 py-4 bg-slate-100 text-slate-600 rounded-full font-bold hover:bg-slate-200 transition">
                    Reiniciar
                </button>
            </div>
        </section>

        <!-- SLIDE 15: Readlines (List) Simulation -->
        <section class="slide flex-col pt-24 px-12 pb-12 items-center" id="slide-15">
            <h2 class="text-4xl font-bold text-brand-title mb-6">Archivo a Lista: <span
                    class="font-mono text-brand-btn">readlines()</span></h2>

            <div class="flex gap-8 w-full max-w-6xl mb-8">
                <!-- Code Editor Style -->
                <div class="w-1/2 vs-light p-6 rounded-lg text-lg font-mono leading-relaxed"
                    id="readlines-code-container">
                    <div id="rls-line-1" class="px-2 rounded transition-colors whitespace-nowrap"><span
                            class="vs-variable">archivoParrafos</span> = <span class="vs-string">"datos.txt"</span>
                    </div>
                    <div class="h-2"></div>
                    <div id="rls-line-2" class="px-2 rounded transition-colors whitespace-nowrap"><span
                            class="vs-keyword">try</span>:</div>
                    <div id="rls-line-3" class="px-2 rounded transition-colors whitespace-nowrap">
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="vs-variable">textoParrafo</span> = <span
                            class="vs-function">open</span>(archivoParrafos, <span class="vs-string">"r"</span>)</div>
                    <div id="rls-line-4" class="px-2 rounded transition-colors whitespace-nowrap"><span
                            class="vs-keyword">except</span>:</div>
                    <div id="rls-line-5" class="px-2 rounded transition-colors whitespace-nowrap">
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="vs-function">print</span>(<span class="vs-string">f"Hubo un
                            error al abrir el archivo"</span>)</div>
                    <div id="rls-line-6" class="px-2 rounded transition-colors whitespace-nowrap"><span
                            class="vs-keyword">else</span>:</div>
                    <div id="rls-line-7" class="px-2 rounded transition-colors whitespace-nowrap">
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="vs-variable">lineas</span> = textoParrafo.<span
                            class="vs-function">readlines</span>()</div>
                    <div id="rls-line-8" class="px-2 rounded transition-colors whitespace-nowrap">
                        &nbsp;&nbsp;&nbsp;&nbsp;textoParrafo.<span class="vs-function">close</span>()</div>
                    <div class="h-2"></div>
                    <div id="rls-line-9" class="px-2 rounded transition-colors whitespace-nowrap">
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="vs-function">print</span>(lineas)</div>
                </div>

                <!-- Result Area -->
                <div class="w-1/2 flex flex-col gap-6">
                    <!-- Memory Representation -->
                    <div class="bg-white border p-6 rounded-xl shadow-lg relative flex-1 min-h-[220px]">
                        <div class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-4">Memoria / Variable
                            <span class="text-blue-600">lineas</span>
                        </div>
                        <div class="vs-light p-4 rounded-xl border-2 border-brand-btn/20 shadow-inner font-mono text-sm min-h-[140px] flex items-center justify-center transition-all bg-slate-50"
                            id="rl-list-container">
                            <span class="italic text-slate-400">[ ... ]</span>
                        </div>
                    </div>

                    <!-- Console -->
                    <div class="bg-slate-900 text-green-400 p-4 rounded font-mono text-xs h-32" id="readlines-output">
                        >_
                    </div>
                </div>
            </div>

            <div class="flex gap-6 items-center">
                <button onclick="readLinesStep()"
                    class="px-10 py-4 bg-brand-btn text-white rounded-full font-bold shadow-lg hover:bg-brand-btnHover transition hover:-translate-y-1">
                    ‚ñ∂Ô∏è Ejecutar Paso
                </button>
                <button onclick="resetReadlinesDemo()"
                    class="px-6 py-4 bg-slate-100 text-slate-600 rounded-full font-bold hover:bg-slate-200 transition">
                    Reiniciar
                </button>

                <div
                    class="ml-12 bg-indigo-50 border border-indigo-100 p-4 rounded-xl flex items-center gap-4 max-w-md">
                    <div class="text-2xl">üí°</div>
                    <p class="text-slate-600 text-xs leading-tight">
                        <b>readlines()</b> crea una lista con todos los elementos de una sola vez. Cada elemento incluye
                        el
                        <code class="bg-blue-100 px-1 rounded font-bold text-blue-900">\n</code> al final.
                    </p>
                </div>
            </div>
        </section>

        <!-- SLIDE 16: Modes Comparison -->
        <section class="slide flex-col pt-24 px-12 pb-12 items-center" id="slide-16">
            <h2 class="text-4xl font-bold text-brand-title mb-6">Modos de Apertura (Escritura)</h2>

            <div class="grid grid-cols-3 gap-8 w-full max-w-6xl h-96">
                <!-- W Block -->
                <div
                    class="bg-white border-2 border-slate-100 hover:border-red-400 p-8 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 flex flex-col">
                    <div class="flex justify-between items-start mb-6">
                        <div class="text-xs font-black bg-red-100 text-red-600 px-2 py-1 rounded tracking-tighter">
                            [REEMPLAZA]</div>
                        <span class="text-4xl font-mono font-black text-red-600">"w"</span>
                    </div>
                    <h3 class="text-xl font-bold text-slate-800 mb-2">Write</h3>
                    <p class="text-sm text-slate-500 mb-6 leading-relaxed">Sobrescribe el archivo. Si no existe, lo
                        crea.
                    </p>

                    <div
                        class="flex-1 bg-slate-50 rounded-xl p-4 font-mono relative border border-slate-100 flex flex-col">
                        <div class="text-slate-400 line-through decoration-red-500 decoration-2 text-sm">Contenido
                            previo...</div>
                        <div class="text-red-600 font-bold text-sm">Nuevo contenido</div>
                    </div>
                </div>

                <!-- A Block -->
                <div
                    class="bg-white border-2 border-slate-100 hover:border-green-400 p-8 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 flex flex-col">
                    <div class="flex justify-between items-start mb-6">
                        <div class="text-xs font-black bg-green-100 text-green-600 px-2 py-1 rounded tracking-tighter">
                            [ANEXA]</div>
                        <span class="text-4xl font-mono font-black text-green-600">"a"</span>
                    </div>
                    <h3 class="text-xl font-bold text-slate-800 mb-2">Append</h3>
                    <p class="text-sm text-slate-500 mb-6 leading-relaxed">Agrega al final sin borrar. Si no existe, lo
                        crea.</p>

                    <div
                        class="flex-1 bg-slate-50 rounded-xl p-4 font-mono flex flex-col border border-slate-100 text-sm">
                        <div class="text-slate-600 font-medium">Contenido previo...</div>
                        <div class="text-slate-600 mb-2 font-medium">Contenido previo...</div>
                        <div class="text-green-600 font-bold">
                            Nuevo contenido anexado
                        </div>
                    </div>
                </div>

                <!-- R+ Block -->
                <div
                    class="bg-white border-2 border-slate-100 hover:border-brand-btn p-8 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 flex flex-col">
                    <div class="flex justify-between items-start mb-6">
                        <div class="text-xs font-black bg-blue-100 text-blue-600 px-2 py-1 rounded tracking-tighter">
                            [ACTUALIZA]</div>
                        <span class="text-4xl font-mono font-black text-blue-600">"r+"</span>
                    </div>
                    <h3 class="text-xl font-bold text-slate-800 mb-2">Read+</h3>
                    <p class="text-sm text-slate-500 mb-6 leading-relaxed">Lectura y escritura. El puntero inicia al
                        principio.</p>

                    <div
                        class="flex-1 bg-slate-50 rounded-xl p-4 font-mono border border-slate-100 flex flex-col gap-2 text-sm">
                        <div class="flex items-center gap-1">
                            <span class="bg-blue-600 text-white px-1 rounded-sm text-[8px] animate-pulse">|</span>
                            <span class="text-blue-800 font-bold">Modificando...</span>
                        </div>
                        <div class="text-slate-700 leading-relaxed">
                            Contenido <span
                                class="text-blue-600 font-bold underline decoration-blue-200">actualizado</span> que no
                            se borra
                            <span class="text-blue-600 font-bold underline decoration-blue-200">autom√°ticamente</span>.
                            <span class="text-blue-600 font-bold block mt-1">Datos extra a√±adidos...</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-12 text-slate-400 text-sm italic">
                La elecci√≥n del modo determina si preservamos o reemplazamos la informaci√≥n.
            </div>
        </section>

        <!-- SLIDE 17: Escritura e Interacci√≥n -->
        <section class="slide flex-col pt-24 px-12 pb-12 items-center" id="slide-17">
            <h2 class="text-4xl font-bold text-brand-title mb-4">Interactuando con <span
                    class="font-mono text-brand-btn">.write()</span></h2>

            <p class="text-slate-600 max-w-2xl text-center mb-8">
                El m√©todo <code class="bg-slate-100 px-1 rounded">.write(texto)</code> permite insertar informaci√≥n en
                un archivo.
                Sin embargo, el resultado final depende de <strong>c√≥mo abrimos</strong> el archivo (el modo).
            </p>

            <div class="flex gap-12 items-start w-full max-w-6xl">
                <!-- File Preview -->
                <div class="w-1/3 flex flex-col gap-4">
                    <div class="text-xs font-bold text-slate-400 uppercase tracking-widest text-center">Estado del
                        Archivo</div>
                    <div class="mac-window h-80 shadow-lg relative">
                        <div class="mac-header"><span class="text-xs">notas.txt</span></div>
                        <div class="p-4 font-mono text-sm whitespace-pre-wrap text-slate-600 bg-white h-full overflow-y-auto"
                            id="write-file-content">Contenido Original...
                            Informaci√≥n importante.
                            No borrar.</div>
                        <div class="absolute inset-0 flex items-center justify-center opacity-0 pointer-events-none transition duration-500"
                            id="write-flash">
                            <span id="flash-label" class="text-white px-4 py-2 rounded font-bold shadow-2xl"></span>
                        </div>
                    </div>
                    <div class="flex justify-center">
                        <button onclick="resetWrite()"
                            class="bg-slate-100 text-slate-600 px-6 py-2 rounded-lg font-bold hover:bg-slate-200 transition text-xs shadow-sm border border-slate-200">
                            Restaurar Archivo Original
                        </button>
                    </div>
                </div>

                <!-- Controls & Code -->
                <div class="flex-1 flex flex-col gap-6">
                    <!-- Config Panel -->
                    <div class="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm flex flex-col gap-6">
                        <div class="flex flex-col gap-4">
                            <div class="flex items-center gap-4">
                                <label class="text-xs font-bold text-slate-400 uppercase">Modo de Apertura</label>
                                <div class="flex bg-slate-100 p-1 rounded-lg">
                                    <button onclick="setWriteMode('w')" id="btn-mode-w"
                                        class="write-mode-btn bg-white text-brand-btn shadow-sm px-6 py-2 rounded-md font-mono font-bold transition">"w"</button>
                                    <button onclick="setWriteMode('a')" id="btn-mode-a"
                                        class="write-mode-btn text-slate-500 px-6 py-2 rounded-md font-mono font-bold transition">"a"</button>
                                    <button onclick="setWriteMode('r+')" id="btn-mode-r"
                                        class="write-mode-btn text-slate-500 px-6 py-2 rounded-md font-mono font-bold transition">"r+"</button>
                                </div>
                            </div>

                            <div class="flex flex-col gap-2">
                                <label class="text-xs font-bold text-slate-400 uppercase">Texto a escribir</label>
                                <textarea id="write-input" oninput="updateWriteUI()" rows="3"
                                    class="w-full bg-slate-50 border border-slate-200 rounded-lg px-4 py-2 font-mono text-sm focus:ring-2 focus:ring-brand-btn outline-none resize-none">¬°Hola Nuevo!</textarea>
                            </div>
                        </div>

                        <!-- Dynamic Code -->
                        <div class="vs-light p-4 rounded-xl border border-slate-100 font-mono text-xs">
                            <span class="vs-variable">f</span> = <span class="vs-function">open</span>(<span
                                class="vs-string">"notas.txt"</span>, <span class="vs-string"
                                id="code-mode">"w"</span>)<br>
                            <span class="vs-variable">f</span>.<span class="vs-function">write</span>(<span
                                class="vs-string">"<span id="code-text">¬°Hola Nuevo!</span>"</span>)<br>
                            <span class="vs-variable">f</span>.<span class="vs-function">close</span>()
                        </div>

                        <button onclick="performWrite()" id="exec-write-btn"
                            class="w-full py-4 bg-red-600 text-white rounded-xl font-bold shadow-lg hover:shadow-xl transition">
                            Ejecutar .write()
                        </button>
                    </div>

                    <!-- Explanatory Tooltip -->
                    <div id="mode-explanation"
                        class="bg-blue-50 border border-blue-100 p-4 rounded-xl flex gap-4 items-center">
                        <div
                            class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-xl font-bold text-brand-btn shadow-sm">
                            i</div>
                        <p class="text-slate-600 text-sm leading-snug" id="mode-text-desc">
                            El modo <strong>"w"</strong> borrar√° todo el contenido actual y escribir√° el nuevo texto
                            desde cero.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 18: Fin del M√≥dulo -->
        <section class="slide flex-col justify-center items-center text-center p-12" id="slide-18">
            <div class="mac-window w-full max-w-2xl p-12 shadow-2xl bg-white flex flex-col items-center">
                <div
                    class="w-24 h-24 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-5xl mb-8 animate-bounce">
                    ‚úì
                </div>
                <h2 class="text-5xl font-extrabold text-brand-title mb-6">¬°M√≥dulo 1 Completado!</h2>
                <p class="text-xl text-slate-500 mb-10 leading-relaxed">
                    Has dominado los conceptos fundamentales para el manejo de archivos en Python.
                </p>

                <div
                    class="grid grid-cols-2 gap-4 w-full text-left bg-slate-50 p-8 rounded-2xl border border-slate-100">
                    <div class="flex items-center gap-3">
                        <span
                            class="w-6 h-6 bg-brand-btn text-white rounded-full flex items-center justify-center text-xs font-bold">1</span>
                        <span class="text-slate-700 font-medium">Apertura y Cierre</span>
                    </div>
                    <div class="flex items-center gap-3">
                        <span
                            class="w-6 h-6 bg-brand-btn text-white rounded-full flex items-center justify-center text-xs font-bold">2</span>
                        <span class="text-slate-700 font-medium">Lectura (Read/Lines)</span>
                    </div>
                    <div class="flex items-center gap-3">
                        <span
                            class="w-6 h-6 bg-brand-btn text-white rounded-full flex items-center justify-center text-xs font-bold">3</span>
                        <span class="text-slate-700 font-medium">Modos de Escritura</span>
                    </div>
                </div>

                <p class="mt-12 text-slate-400 font-mono text-sm tracking-tighter">
                    Python Programaci√≥n I - 2026
                </p>
            </div>
        </section>

    </main>

    <!-- Navigation Controls -->
    <nav class="fixed bottom-8 right-8 flex gap-4 z-50">
        <button onclick="prevSlide()"
            class="w-14 h-14 bg-white text-brand-btn text-2xl font-bold rounded-full shadow-lg border border-slate-200 hover:bg-slate-50 transition flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"
            id="prev-btn">
            ‚Üê
        </button>
        <button onclick="nextSlide()"
            class="w-14 h-14 bg-brand-btn text-white text-2xl font-bold rounded-full shadow-lg hover:bg-brand-btnHover transition flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"
            id="next-btn">
            ‚Üí
        </button>
    </nav>

    <script>
        /* --- CORE LOGIC --- */
        let currentSlide = 0;
        const totalSlides = 18;
        const slides = document.querySelectorAll('.slide');

        // Init
        updateSlideVisibility();

        // Navigation
        function updateSlideVisibility() {
            slides.forEach((s, i) => {
                if (i === currentSlide) {
                    s.classList.add('active');
                    // Trigger animations/reset if needed
                } else {
                    s.classList.remove('active');
                }
            });
            // Update Header Counter
            document.getElementById('current-slide-num').innerText = currentSlide + 1;

            // Button States
            document.getElementById('prev-btn').disabled = currentSlide === 0;
            document.getElementById('next-btn').disabled = currentSlide === totalSlides - 1;

            // Explorer Render
            if (currentSlide === 4) renderExplorer();
        }

        function nextSlide() {
            if (currentSlide < totalSlides - 1) {
                currentSlide++;
                updateSlideVisibility();
            }
        }

        function prevSlide() {
            if (currentSlide > 0) {
                currentSlide--;
                updateSlideVisibility();
            }
        }

        // Keyboard Nav
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ' || e.key === 'Enter') nextSlide();
            if (e.key === 'ArrowLeft') prevSlide();
        });

        /* --- INTERACTIVE FUNCTIONS --- */

        // Slide 3: Path Tooltips Highlight
        // (Handled via CSS hover logic mainly, but could add sounds/more visual feedback)
        const parts = document.querySelectorAll('.part');
        const infoBox = document.getElementById('path-info-box');
        parts.forEach(p => {
            p.addEventListener('mouseenter', () => {
                infoBox.innerText = p.dataset.info;
                infoBox.classList.remove('opacity-0', 'translate-y-4');
            });
            p.addEventListener('mouseleave', () => {
                infoBox.classList.add('opacity-0', 'translate-y-4');
            });
        });

        /* --- EXPLORER LOGIC (Mac Style) --- */
        const fileStructure = {
            'root': { path: '/', items: [{ name: 'Users', type: 'folder', target: 'users' }, { name: 'System', type: 'folder', target: null }] },
            'users': { path: '/Users', items: [{ name: 'Programaci√≥n', type: 'folder', target: 'programacion' }, { name: 'Shared', type: 'folder', target: null }] },
            'programacion': { path: '/Users/Programacion', items: [{ name: 'Clase01', type: 'folder', target: 'project', special: true }, { name: 'Desktop', type: 'folder', target: null }] },
            'project': {
                path: '/Users/Programacion/Clase01', items: [
                    { name: 'encuestas', type: 'folder', target: 'encuestas' },
                    { name: 'main.py', type: 'script' },
                    { name: 'datos.txt', type: 'file' }
                ]
            },
            'encuestas': {
                path: '/Users/Programacion/Clase01/encuestas', items: [
                    { name: 'enero.csv', type: 'file' },
                    { name: 'febrero.csv', type: 'file' }
                ]
            }
        };

        let currentExplorerDir = 'project';
        const CWD_PATH = '/Users/Programacion/Clase01';

        function navExplorer(dirKey) {
            if (!fileStructure[dirKey]) return;
            currentExplorerDir = dirKey;
            renderExplorer();
            clearSelection();
        }

        function explorerUp() {
            const current = fileStructure[currentExplorerDir].path;
            if (current === '/') return;
            const parts = current.split('/').filter(p => p);
            parts.pop();
            const parentPath = '/' + parts.join('/');
            const parentKey = Object.keys(fileStructure).find(k => fileStructure[k].path === (parentPath === '' ? '/' : parentPath));
            if (parentKey) navExplorer(parentKey);
            else if (current === '/Users') navExplorer('root');
        }

        function renderExplorer() {
            const data = fileStructure[currentExplorerDir];
            const grid = document.getElementById('file-grid');
            const addrBar = document.getElementById('address-bar');
            const upBtn = document.getElementById('explorer-up-btn');

            if (!grid) return;

            addrBar.textContent = data.path;
            if (upBtn) upBtn.disabled = currentExplorerDir === 'root';
            grid.innerHTML = '';

            data.items.forEach(item => {
                const el = document.createElement('div');
                el.className = 'flex flex-col items-center gap-2 p-4 bg-white border border-slate-100 rounded-xl shadow-sm hover:shadow-md hover:bg-blue-50 cursor-pointer transition relative group';

                if (item.type === 'folder') {
                    el.innerHTML = `
                        <div class="text-5xl text-blue-400 mb-1 transition transform group-hover:scale-110">üìÅ</div>
                        <span class="text-xs font-bold text-center text-slate-600 w-full truncate">${item.name}</span>
                    `;
                    el.onclick = () => {
                        if (item.target) navExplorer(item.target);
                    };
                } else {
                    let iconHtml = '<div class="text-5xl text-slate-300 mb-1 transition transform group-hover:scale-110">üìÑ</div>';
                    if (item.type === 'script') {
                        iconHtml = `<div class="relative transition transform group-hover:scale-110 mb-1"><span class="text-5xl text-yellow-500 drop-shadow-sm">üìú</span><span class="absolute -bottom-1 -right-1 text-[10px] uppercase font-black bg-blue-600 text-white px-1 py-0.5 rounded shadow">PY</span></div>`;
                    }
                    el.innerHTML = `
                        ${iconHtml}
                        <span class="text-xs font-bold text-center text-slate-600 w-full truncate">${item.name}</span>
                    `;
                    el.onclick = () => selectFile(item);
                }
                grid.appendChild(el);
            });
        }

        function selectFile(item) {
            document.getElementById('no-selection').classList.add('hidden');
            document.getElementById('selection-info').classList.remove('hidden');

            document.getElementById('sel-filename').innerText = item.name;
            const dir = fileStructure[currentExplorerDir].path;
            const cleanDir = dir === '/' ? '' : dir;
            const abs = `${cleanDir}/${item.name}`;
            document.getElementById('sel-abs').innerText = abs;

            // Rel Path Logic
            let rel = "";
            if (abs.startsWith(CWD_PATH)) {
                if (abs === CWD_PATH) rel = ".";
                else {
                    const sub = abs.substring(CWD_PATH.length);
                    rel = sub.startsWith('/') ? sub.substring(1) : sub;
                }
            } else {
                // Simplified traversal for others
                if (currentExplorerDir === 'dante') rel = `../${item.name}`;
                else if (currentExplorerDir === 'users') rel = `../../${item.name}`;
                else rel = `../../../${item.name}`;
            }
            document.getElementById('sel-rel').innerText = rel;

            document.getElementById('sel-icon').innerText = item.type === 'script' ? 'üìú' : 'üìÑ';
            document.getElementById('sel-type').innerText = item.type === 'script' ? 'SCRIPT PYTHON' : 'ARCHIVO';
        }

        function clearSelection() {
            const info = document.getElementById('selection-info');
            const no = document.getElementById('no-selection');
            if (info) info.classList.add('hidden');
            if (no) no.classList.remove('hidden');
        }

        // Init Explorer
        renderExplorer();

        // Slide 6: Modes
        function setMode(m) {
            document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('ring-2', 'ring-brand-accent', 'bg-slate-50', 'bg-white'));
            const btn = document.querySelector(`button[data-mode="${m}"]`);
            // Highlight logic handled by CSS hover mostly, adding active state
            document.getElementById('code-mode').innerText = `"${m}"`;

            let text = "";
            if (m === 'r') text = "Abre el archivo para lectura. Si no existe, lanza error.";
            if (m === 'w') text = "Abre para escritura. Si existe, LO BORRA. Si no, lo crea.";
            if (m === 'a') text = "Abre para anexar (append). Escribe al final sin borrar. Crea si no existe.";
            if (m === 'r+') text = "Leer y Escribir. El puntero inicia al principio. No borra pero sobrescribe caracteres.";

            document.getElementById('mode-explanation').innerText = text;
        }

        // Slide 8: Demo Load
        function loadFileDemo(filename, relativePath, content) {
            document.getElementById('demo-path-code').innerText = `"${relativePath}"`;
            const output = document.getElementById('demo-output');

            output.innerHTML = `<span class="text-emerald-500">$ python script.py</span><br>`;
            setTimeout(() => {
                output.innerHTML += `<span class="text-white">${content.replace(/\n/g, '<br>')}</span><br><br>`;
                output.scrollTop = output.scrollHeight;
            }, 300);
        }

        // Slide 9: Comic Animation
        function runComic() {
            // Reset state
            const bugBad = document.getElementById('bug-bad');
            const bugGood = document.getElementById('bug-good');
            const codeBad = document.getElementById('code-bad');
            const boom = document.getElementById('boom');
            const shield = document.getElementById('shield');

            // stop transitions
            bugBad.style.transition = 'none';
            bugGood.style.transition = 'none';

            // reset positions
            bugBad.style.left = '-64px';
            bugGood.style.left = '-64px';
            bugBad.style.transform = 'none';
            bugGood.style.transform = 'none';

            // reset visibility and animation states
            bugBad.classList.remove('opacity-0');
            bugGood.classList.remove('opacity-0');
            codeBad.classList.remove('opacity-0', 'scale-0');

            // reset boom
            boom.classList.add('opacity-0', 'scale-0');
            boom.classList.remove('scale-150', 'animate-ping');

            // hide shield
            shield.classList.add('opacity-0', 'scale-y-0');

            // Force reflow
            void bugBad.offsetWidth;

            // Step 1: Show Shield
            setTimeout(() => {
                shield.classList.remove('opacity-0', 'scale-y-0');
            }, 300);

            // Step 2: Launch Bugs
            setTimeout(() => {
                bugBad.style.transition = 'left 2s cubic-bezier(0.45, 0.05, 0.55, 0.95)';
                bugGood.style.transition = 'left 1s cubic-bezier(0.45, 0.05, 0.55, 0.95)';
                bugBad.style.left = '90px'; // Hits code area
                bugGood.style.left = '40px'; // Hits shield
            }, 800);

            // Step 3: Bad result - Explosion
            setTimeout(() => {
                codeBad.classList.add('opacity-0', 'scale-0');
                bugBad.classList.add('opacity-0');
                boom.classList.remove('opacity-0', 'scale-0');
                // Ensure ping animation restarts
                boom.classList.add('scale-150', 'animate-ping');

                // Make it static after a short animation burst
                setTimeout(() => {
                    boom.classList.remove('animate-ping');
                }, 800);
            }, 2800);

            // Step 4: Good result - Bounce
            setTimeout(() => {
                bugGood.style.transition = 'all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
                bugGood.style.left = '-20px';
                bugGood.style.transform = 'rotate(-180deg) scale(0.5)';
            }, 1800);
        }

        // Slide 10: Try Except Toggle
        function toggleFileExistence(exists) {
            document.getElementById('btn-exist-true').className = exists ?
                "px-6 py-3 rounded-lg border-2 border-green-500 bg-green-50 text-green-700 font-bold" :
                "px-6 py-3 rounded-lg border-2 border-slate-200 text-slate-400 opacity-50";

            document.getElementById('btn-exist-false').className = !exists ?
                "px-6 py-3 rounded-lg border-2 border-red-500 bg-red-50 text-red-700 font-bold" :
                "px-6 py-3 rounded-lg border-2 border-slate-200 text-slate-400 opacity-50";

            const arrow = document.getElementById('try-result-arrow');
            const msg = document.getElementById('try-result-msg');
            const blVar = document.getElementById('block-var');
            const blTry = document.getElementById('block-try');
            const blExc = document.getElementById('block-except');
            const blElse = document.getElementById('block-else');

            // Reset
            [blVar, blTry, blExc, blElse].forEach(el => el.classList.remove('bg-green-100', 'border-green-300', 'bg-red-100', 'border-red-100', 'border-red-300'));

            if (exists) {
                blVar.classList.add('bg-green-100', 'border-green-300');
                setTimeout(() => {
                    blTry.classList.add('bg-green-100', 'border-green-300');
                    setTimeout(() => {
                        blElse.classList.add('bg-green-100', 'border-green-300');
                    }, 400);
                }, 300);

                arrow.classList.replace('text-red-500', 'text-green-500');
                arrow.classList.replace('text-slate-300', 'text-green-500');

                msg.innerText = "¬°Ubicado! Se ejecuta el 'else'.";
                msg.className = "text-2xl font-bold p-4 rounded-lg bg-green-100 text-green-700 transition-all";
            } else {
                blVar.classList.add('bg-red-100', 'border-red-300');
                setTimeout(() => {
                    blTry.classList.add('bg-red-100', 'border-red-300');
                    setTimeout(() => {
                        blExc.classList.add('bg-red-100', 'border-red-300');
                    }, 400);
                }, 300);

                arrow.classList.replace('text-green-500', 'text-red-500');
                arrow.classList.replace('text-slate-300', 'text-red-500');

                msg.innerText = "No se hall√≥. Se ejecuta 'except'.";
                msg.className = "text-2xl font-bold p-4 rounded-lg bg-red-100 text-red-700 transition-all";
            }
        }

        // Slide 9: Flow Animation
        function animateFlow(step) {
            const details = document.getElementById('flow-details');
            if (step === 0) details.innerText = "1. Se intenta ejecutar el c√≥digo...";
            if (step === 1) details.innerText = "2. Si hay error, salta aqu√≠ inmediatamente.";
            if (step === 2) details.innerText = "3. Si todo sali√≥ bien, pasa por aqu√≠.";
            if (step === 3) details.innerText = "4. Pase lo que pase, esto se ejecuta al final.";
        }

        // Slide 10: Exec Simulation
        function simExec(exists) {
            const cons = document.getElementById('exec-console');
            cons.innerHTML = ">_<br>";
            if (exists) {
                setTimeout(() => cons.innerHTML += "Intentando abrir... OK<br>", 300);
                setTimeout(() => cons.innerHTML += "<span class='text-green-400'>Abierto con √©xito</span><br>", 800);
            } else {
                setTimeout(() => cons.innerHTML += "Intentando abrir... <span class='text-red-500'>ERROR</span><br>", 300);
                setTimeout(() => cons.innerHTML += "<span class='text-yellow-400'>Error</span> (capturado)<br>", 800);
            }
        }

        // Slide 13: Read Chars
        let cursorPerc = 0;
        let charIndex = 0;
        const text = "Hola_Mundo_Python";
        function readChars(n) {
            // reset if end
            if (charIndex >= text.length) {
                resetReadChars();
                return;
            }

            const chunk = text.substr(charIndex, n);
            charIndex += n;
            document.getElementById('read-buffer').innerText = chunk;

            // Update text highlighting
            const container = document.getElementById('char-stream-text');
            const p1 = text.substr(0, charIndex);
            const p2 = text.substr(charIndex);
            container.innerHTML = `<span class="bg-brand-highlight text-white">${p1}</span>${p2}`;
        }

        function resetReadChars() {
            charIndex = 0;
            document.getElementById('read-buffer').innerText = "";
            document.getElementById('char-stream-text').innerText = text;
        }

        // Slide 14: ReadLine Step Logic
        let rlState = 0;
        let rlFilePointer = 0;
        const rlLines = [
            "P√°rrafo 1: Introducci√≥n a Python.",
            "P√°rrafo 2: Manejo de archivos externos.",
            "P√°rrafo 3: Cierre de recursos."
        ];

        function readLineNext() {
            const codeLines = document.querySelectorAll('#readline-code-container > div[id^="rl-line-"]');
            const fileLines = document.querySelectorAll('#poem-lines .line-item');
            const output = document.getElementById('readline-output');

            const highlightCode = (lineId) => {
                codeLines.forEach(l => l.classList.remove('bg-yellow-200', 'border-l-4', 'border-yellow-500', 'font-bold'));
                const el = document.getElementById(`rl-line-${lineId}`);
                if (el) el.classList.add('bg-yellow-200', 'border-l-4', 'border-yellow-500', 'font-bold');
            };

            const highlightFile = (index) => {
                fileLines.forEach(l => l.classList.remove('bg-blue-100', 'text-brand-btn', 'font-black'));
                if (index >= 0 && index < fileLines.length) {
                    fileLines[index].classList.add('bg-blue-100', 'text-brand-btn', 'font-black');
                    fileLines[index].classList.remove('text-slate-400');
                    fileLines[index].classList.add('text-slate-700');
                }
            };

            switch (rlState) {
                case 0: highlightCode(1); output.innerText = "> _"; rlState = 1; break;
                case 1: highlightCode(2); rlState = 2; break;
                case 2: highlightCode(3); rlState = 3; break;
                case 3: highlightCode(6); rlState = 4; break;
                case 4: highlightCode(7); highlightFile(rlFilePointer); rlState = 5; break;
                case 5: highlightCode(8); rlState = (rlFilePointer < rlLines.length) ? 6 : 9; break;
                case 6: highlightCode(9);
                    const cur = output.innerText === "> _" ? "" : output.innerText + "\n";
                    output.innerText = cur + rlLines[rlFilePointer];
                    rlState = 7; break;
                case 7: highlightCode(10); rlFilePointer++; highlightFile(rlFilePointer); rlState = 5; break;
                case 9: highlightCode(11); highlightFile(-1); output.innerText += "\n> Proceso terminado."; rlState = 10; break;
                default: resetReadLineDemo(); break;
            }
        }

        function resetReadLineDemo() {
            rlState = 0; rlFilePointer = 0;
            document.getElementById('readline-output').innerText = "> _";
            document.querySelectorAll('#readline-code-container > div').forEach(l => l.classList.remove('bg-yellow-200', 'border-l-4', 'border-yellow-500', 'font-bold'));
            document.querySelectorAll('#poem-lines .line-item').forEach(l => {
                l.classList.remove('bg-blue-100', 'text-brand-btn', 'font-black', 'text-slate-700');
                l.classList.add('text-slate-400');
            });
        }

        // Slide 15: Readlines Step Logic
        let rlsState = 0;
        const rlsContent = [
            "P√°rrafo 1: Introducci√≥n a Python.\\n",
            "P√°rrafo 2: Manejo de archivos externos.\\n",
            "P√°rrafo 3: Cierre de recursos."
        ];

        function readLinesStep() {
            const codeLines = document.querySelectorAll('#readlines-code-container > div[id^="rls-line-"]');
            const listContainer = document.getElementById('rl-list-container');
            const output = document.getElementById('readlines-output');

            const highlightCode = (lineId) => {
                codeLines.forEach(l => l.classList.remove('bg-indigo-100', 'border-l-4', 'border-indigo-500', 'font-black'));
                const el = document.getElementById(`rls-line-${lineId}`);
                if (el) el.classList.add('bg-indigo-100', 'border-l-4', 'border-indigo-500', 'font-black');
            };

            switch (rlsState) {
                case 0: highlightCode(1); output.innerText = "> _"; rlsState = 1; break;
                case 1: highlightCode(2); rlsState = 2; break;
                case 2: highlightCode(3); rlsState = 3; break;
                case 3: highlightCode(6); rlsState = 4; break;
                case 4: // THE TRANSFORMATION
                    highlightCode(7);
                    listContainer.classList.remove('italic', 'text-slate-400');
                    listContainer.innerHTML = `
                        <div class="flex flex-col gap-1 w-full scale-in text-left">
                            <span class="vs-keyword text-blue-800">[</span>
                            <div class="pl-4"><span class="vs-string">"${rlsContent[0]}"</span>,</div>
                            <div class="pl-4"><span class="vs-string">"${rlsContent[1]}"</span>,</div>
                            <div class="pl-4"><span class="vs-string">"${rlsContent[2]}"</span></div>
                            <span class="vs-keyword text-blue-800">]</span>
                        </div>
                    `;
                    rlsState = 5;
                    break;
                case 5: highlightCode(8); rlsState = 6; break;
                case 6: highlightCode(9);
                    output.innerText = "> ['P√°rrafo 1...', 'P√°rrafo 2...', 'P√°rrafo 3...']";
                    rlsState = 7; break;
                default: resetReadlinesDemo(); break;
            }
        }

        function resetReadlinesDemo() {
            rlsState = 0;
            const output = document.getElementById('readlines-output');
            const listContainer = document.getElementById('rl-list-container');

            output.innerText = "> _";
            listContainer.classList.add('italic', 'text-slate-400');
            listContainer.innerHTML = '<span class="italic text-slate-400">[ ... ]</span>';

            document.querySelectorAll('#readlines-code-container > div').forEach(l => l.classList.remove('bg-indigo-100', 'border-l-4', 'border-indigo-500', 'font-black'));
        }

        // Slide 17: Interactive Write Logic
        let currentWriteMode = 'w';
        const originalFileContent = "Contenido Original...\nInformaci√≥n importante.\nNo borrar.";
        let currentFileContent = originalFileContent;

        function setWriteMode(mode) {
            currentWriteMode = mode;

            // Update buttons
            document.querySelectorAll('.write-mode-btn').forEach(btn => {
                btn.classList.remove('bg-white', 'text-brand-btn', 'shadow-sm', 'active');
                btn.classList.add('text-slate-500');
            });

            const activeBtn = document.getElementById(`btn-mode-${mode === 'r+' ? 'r' : mode}`);
            activeBtn.classList.remove('text-slate-500');
            activeBtn.classList.add('bg-white', 'text-brand-btn', 'shadow-sm', 'active');

            // Update execution button color
            const execBtn = document.getElementById('exec-write-btn');
            if (mode === 'w') execBtn.className = "w-full py-4 bg-red-600 text-white rounded-xl font-bold shadow-lg transition flex items-center justify-center gap-2";
            if (mode === 'a') execBtn.className = "w-full py-4 bg-green-600 text-white rounded-xl font-bold shadow-lg transition flex items-center justify-center gap-2";
            if (mode === 'w') execBtn.className = "w-full py-4 bg-red-600 text-white rounded-xl font-bold shadow-lg transition";
            if (mode === 'a') execBtn.className = "w-full py-4 bg-green-600 text-white rounded-xl font-bold shadow-lg transition";
            if (mode === 'r+') execBtn.className = "w-full py-4 bg-blue-600 text-white rounded-xl font-bold shadow-lg transition";

            updateWriteUI();
        }

        function updateWriteUI() {
            const inputVal = document.getElementById('write-input').value;
            const codeModeEl = document.getElementById('code-mode');
            const codeTextEl = document.getElementById('code-text');

            if (codeModeEl) codeModeEl.innerText = `"${currentWriteMode}"`;
            if (codeTextEl) codeTextEl.innerText = inputVal;

            const desc = document.getElementById('mode-text-desc');

            if (currentWriteMode === 'w') {
                desc.innerHTML = 'Modo <strong>"w"</strong>: Borra TODO y escribe el nuevo texto desde el inicio.';
            } else if (currentWriteMode === 'a') {
                desc.innerHTML = 'Modo <strong>"a"</strong>: Mantiene lo anterior y a√±ade al final absoluto.';
            } else {
                desc.innerHTML = `Modo <strong>"r+"</strong>: Mantiene lo anterior y sobreescribe parte del inicio con el nuevo texto.`;
            }
        }

        function performWrite() {
            const inputText = document.getElementById('write-input').value;
            const contentEl = document.getElementById('write-file-content');
            const flash = document.getElementById('write-flash');
            const label = document.getElementById('flash-label');

            let newContent = "";
            let flashColor = "";
            let flashText = "";
            let highlightedHTML = "";

            if (currentWriteMode === 'w') {
                newContent = inputText;
                flashColor = "bg-red-600";
                flashText = "¬°SOBREESCRITO!";
                highlightedHTML = `<span class="text-red-600 font-bold">${newContent}</span>`;
            } else if (currentWriteMode === 'a') {
                newContent = currentFileContent + (currentFileContent.endsWith('\n') ? '' : '\n') + inputText;
                flashColor = "bg-green-600";
                flashText = "¬°ANEXADO!";
                const lines = newContent.split('\n');
                const lastLine = lines[lines.length - 1];
                const prev = lines.slice(0, -1).join('\n');
                highlightedHTML = `<span class="text-slate-400">${prev}\n</span><span class="text-green-600 font-bold">${lastLine}</span>`;
            } else if (currentWriteMode === 'r+') {
                const prefix = inputText;
                const suffix = currentFileContent.substring(Math.min(inputText.length, currentFileContent.length));
                newContent = prefix + suffix;
                flashColor = "bg-blue-600";
                flashText = "¬°ACTUALIZADO!";
                highlightedHTML = `<span class="text-blue-600 font-bold underline decoration-blue-200">${prefix}</span><span class="text-slate-400">${suffix}</span>`;
            }

            label.innerText = flashText;
            label.className = `text-white px-4 py-2 rounded font-bold shadow-2xl ${flashColor}`;
            flash.style.backgroundColor = currentWriteMode === 'w' ? 'rgba(254, 226, 226, 0.5)' :
                currentWriteMode === 'a' ? 'rgba(220, 252, 231, 0.5)' : 'rgba(219, 234, 254, 0.5)';

            flash.classList.remove('opacity-0', 'pointer-events-none');
            flash.classList.add('opacity-100');

            setTimeout(() => {
                flash.classList.remove('opacity-100');
                flash.classList.add('opacity-0');
                currentFileContent = newContent;
                contentEl.innerHTML = highlightedHTML;
            }, 600);
        }

        function resetWrite() {
            currentFileContent = originalFileContent;
            const contentEl = document.getElementById('write-file-content');
            contentEl.innerText = currentFileContent;
            contentEl.className = "p-4 font-mono text-sm whitespace-pre-wrap text-slate-600 bg-white h-full overflow-y-auto";
            updateWriteUI();
        }

        // Initialize Slide 17
        setWriteMode('w');
        document.getElementById('write-file-content').innerText = currentFileContent;

    </script>
</body>

</html>